var __reflect=this&&this.__reflect||function(e,t,r){e.__class__=t,r?r.push(t):r=[t],e.__types__=e.__types__?r.concat(e.__types__):r},__extends=this&&this.__extends||function(e,t){function r(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);r.prototype=t.prototype,e.prototype=new r},HttpConnect=function(){function e(){}return e.prototype.SendHttpMsg=function(e,t,r){Log.trace("msg","请求消息= "+e);var n=new HLoad;n.time=egret.getTimer(),n.hander=t,void 0!==r&&(n.isJson=r),n.responseType=egret.HttpResponseType.TEXT,n.open(this.apiUrl,egret.HttpMethod.POST),n.setRequestHeader("Content-Type","application/json;charset=UTF-8"),n.send(e),n.addEventListener(egret.Event.COMPLETE,this.onPostComplete,this),n.addEventListener(egret.IOErrorEvent.IO_ERROR,this.onPostIOError,this),n.addEventListener(egret.ProgressEvent.PROGRESS,this.onPostProgress,this)},e.prototype.SendUrlHttpMsg=function(e,t,r,n,i){void 0===n&&(n=!1),void 0===i&&(i=egret.HttpMethod.POST),Log.trace("msg","请求消息= "+t);var o=new HLoad;o.time=egret.getTimer(),o.hander=r,void 0!==n&&(o.isJson=n),o.responseType=egret.HttpResponseType.TEXT,o.open(e,i),o.setRequestHeader("Content-Type","application/json;charset=UTF-8"),o.send(t),o.addEventListener(egret.Event.COMPLETE,this.onPostComplete,this),o.addEventListener(egret.IOErrorEvent.IO_ERROR,this.onPostIOError,this),o.addEventListener(egret.ProgressEvent.PROGRESS,this.onPostProgress,this)},e.prototype.onPostComplete=function(e){var t=e.currentTarget;if(Log.trace("msg","回来消息用时= "+(egret.getTimer()-t.time)),Log.trace("msg","消息："+JSON.stringify(t.response)),t.hander)if(t.isJson){var r=JSON.parse(t.response);t.hander.executeWith([r])}else t.hander.executeWith([t.response])},e.prototype.onPostIOError=function(e){Log.trace("com","post error : "+e)},e.prototype.onPostProgress=function(e){Log.trace("com","post progress : "+Math.floor(100*e.bytesLoaded/e.bytesTotal)+"%")},e}();__reflect(HttpConnect.prototype,"HttpConnect");var TcpServer=function(){function e(){this.init()}return e.sendMessages=function(t,r){e._socket&&e._socket.getConnected()&&e._socket.sendPackage(t,r)},e.close=function(){e._socket&&e._socket.getConnected()&&e._socket.close()},e.unUseFul=function(){close(),GameSocketNew.setInstanceNull(),e._socket=null},e.hadSocket=function(){return e._socket?!0:!1},e.prototype.init=function(){e._socket=GameSocketNew.getInstance(),e._socket.register(this)},e.prototype.connect=function(t,r){e._socket||this.init(),e._socket.getConnected()||e._socket.connect(t,r)},e.prototype.getConnected=function(){return e._socket?e._socket.getConnected():!1},e.prototype.onConnect=function(){},e.prototype.onMessageReceived=function(e,t){},e.prototype.onDisConnect=function(){this.onLoseConnectionWithServer()},e.prototype.onConnectError=function(){this.showErrorMessageContent(),this.receiveIOError()},e.prototype.showErrorMessageContent=function(){},e.prototype.receiveIOError=function(){close(),this.onLoseConnectionWithServer()},e.prototype.onLoseConnectionWithServer=function(){},e}();__reflect(TcpServer.prototype,"TcpServer",["IMessageListener"]);var BaseClass=function(){function e(){}return e.getInstance=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var r=this;if(!r._instance){var n=e.length;0===n?r._instance=new r:1===n?r._instance=new r(e[0]):2===n?r._instance=new r(e[0],e[1]):3===n?r._instance=new r(e[0],e[1],e[2]):4===n?r._instance=new r(e[0],e[1],e[2],e[3]):5===n&&(r._instance=new r(e[0],e[1],e[2],e[3],e[4]))}return r._instance},e}();__reflect(BaseClass.prototype,"BaseClass");var BaseSound=function(){function e(){this._cache={},this._loadingCache=new Array,App.TimerManager.doTimer(6e4,0,this.dealSoundTimer,this)}return e.prototype.getSound=function(e){var t=RES.getRes(e);if(t)this._cache[e]&&(this._cache[e]=egret.getTimer());else{if(-1!=this._loadingCache.indexOf(e))return null;this._loadingCache.push(e),RES.getResAsync(e,this.onResourceLoadComplete,this)}return t},e.prototype.loadedPlay=function(e){},e.prototype.checkCanClear=function(e){return!0},e.prototype.dealSoundTimer=function(){for(var e=egret.getTimer(),t=Object.keys(this._cache),r=0,n=t.length;n>r;r++){var i=t[r];this.checkCanClear(i)&&e-this._cache[i]>=SoundManager.CLEAR_TIME&&(delete this._cache[i],RES.destroyRes(i))}},e.prototype.onResourceLoadComplete=function(e,t){var r=this._loadingCache.indexOf(t);-1!=r&&(this._loadingCache.splice(r,1),this._cache[t]=egret.getTimer(),this.loadedPlay(t))},e}();__reflect(BaseSound.prototype,"BaseSound");var ShockUtils=function(e){function t(){var t=e.call(this)||this;return t.MAP=0,t.SPRITE=1,t.mapPoss=[new egret.Point(0,3),new egret.Point(0,0),new egret.Point(0,-2)],t.spritePoss=[new egret.Point(5,0),new egret.Point(-5,0),new egret.Point(5,0)],t._shockLength=0,t._shockCount=0,t._rx=0,t._ry=0,t._type=0,t._repeatCount=0,t}return __extends(t,e),t.prototype.destroy=function(){this.stop()},t.prototype.shock=function(e,t,r){void 0===e&&(e=0),void 0===t&&(t=null),void 0===r&&(r=3),this._target||(this._type=e,this._target=t,this._type==this.MAP?(this._shockPoss=this.mapPoss.concat(),this._shockLength=this._shockPoss.length):this._type==this.SPRITE&&(this._shockPoss=this.spritePoss.concat(),this._shockLength=this._shockPoss.length),this.start(r))},t.prototype.start=function(e){void 0===e&&(e=1),this.repeatCount=e,this._shockCount=0,this._target&&(this._type!=this.MAP&&(this._rx=this._target.x),this._ry=this._target.y,App.TimerManager.doFrame(1,0,this.onShockEnter,this))},t.prototype.stop=function(){this._target&&(this._type!=this.MAP&&(this._target.x=this._rx),this._target.y=this._ry,App.TimerManager.remove(this.onShockEnter,this)),this._target=null},t.prototype.onShockEnter=function(e){var t=this._shockLength*this._repeatCount;if(this._shockCount>=t)return void this.stop();var r=this._shockCount%this._shockLength,n=this._shockPoss[r];this._target&&(this._type!=this.MAP&&(this._target.x=this._rx+n.x),this._target.y=this._ry+n.y),this._shockCount++},Object.defineProperty(t.prototype,"repeatCount",{get:function(){return this._repeatCount},set:function(e){this._repeatCount=e},enumerable:!0,configurable:!0}),t}(BaseClass);__reflect(ShockUtils.prototype,"ShockUtils");var GameConfigManager=function(){function e(){this.TEXT_COLORS={black:0,blue:1742039,green:58624,grayblue:4180940,golden:16766720,white:16777215,milkWhite:16511407,grayWhite:8421504,yellow:16776960,lightYellow:16765813,orangeYellow:16032837,red:14228790,purple:14564160,pink:16724016,ligthRed:13702568},this.LABEL_FONT_SIZE={bigSize:36,littleSize:12,middleSize:18,normalSize:24}}return e.prototype.systemType=function(){if(egret.Capabilities.runtimeType!=egret.RuntimeType.NATIVE){var e=window.navigator.userAgent.toLowerCase();""+e.match(/MicroMessenger/i);return""+e.match(/windows nt/i)=="windows nt"?"windows":""+e.match(/iphone/i)=="iphone"?"ios":""+e.match(/android/i)=="android"?"android":""+e.match(/ipad/i)=="ipad"?"ipad":""+e.match(/linux/i)=="linux"?"linux":""+e.match(/mac/i)=="mac"?"mac":""+e.match(/ucbrower/i)=="ucbrower"?"ucbrower":void Log.trace("msg","未知系统类型")}},e.prototype.curStage=function(){return egret.MainContext.instance.stage},e.prototype.curWidth=function(){return egret.MainContext.instance.stage.stageWidth},e.prototype.curHeight=function(){return egret.MainContext.instance.stage.stageHeight},e}();__reflect(GameConfigManager.prototype,"GameConfigManager");var DicErrorCode=function(){function e(){}return e.prototype.initFromJson=function(e){this.objErrorMsg=RES.getRes(e)},e.prototype.getDesc=function(e){var t=this.objErrorMsg[e];return t?t:"不存在的错误号"},e}();__reflect(DicErrorCode.prototype,"DicErrorCode",["IReadJson"]);var DicServerInfo=function(){function e(){this.serverUrl="",this.usehttps=0}return e.prototype.initFromJson=function(e){var t=RES.getRes(e);BaseFunc.objToClass(t,this)},e}();__reflect(DicServerInfo.prototype,"DicServerInfo",["IReadJson"]);var BGUpManager=function(){function e(){this._mask=new eui.UILayer,this.darkSprite=new eui.Rect,this.darkSprite.fillColor=0,this.darkSprite.top=0,this.darkSprite.bottom=0,this._mask.addChild(this.darkSprite)}return e.prototype.reSizePop=function(){if(!(this._mask.numChildren<=1))for(var e=0;e<this._mask.numChildren;e++){var t=this._mask.getChildAt(e);t instanceof UIObject&&this.resizePannel(t)}},e.prototype.resizePannel=function(e){var t=e.width,r=e.height;e.x=GM.gamec.curWidth()/2-t/2,e.y=GM.gamec.curHeight()/2-r/2},e.prototype.addBGUp=function(e,t){this.darkSprite.width=GM.gamec.curWidth(),this.darkSprite.height=GM.gamec.curHeight(),this.darkSprite.alpha=t,this.darkSprite.touchEnabled=!0,this.darkSprite.visible=!0,e.contains(this._mask)||e.addChild(this._mask)},e.prototype.removePopUp=function(e,t){void 0===t&&(t=0);var r=function(e){};this.darkSprite&&egret.Tween.get(this.darkSprite).to({alpha:0},100).call(r,this,[this.darkSprite])},e.prototype.close=function(){this._mask.numChildren>1?this._mask.swapChildrenAt(this._mask.getChildIndex(this.darkSprite),this._mask.numChildren-2):this._mask.parent&&this._mask.parent.removeChild(this._mask)},e.prototype.closeAllDlg=function(){for(;this._mask.numChildren>1;){var e=this._mask.getChildAt(0);e instanceof UIObject?(this._mask.removeChild(e),UIPool.getInstance().destroyObject(e)):this._mask.swapChildrenAt(this._mask.getChildIndex(this.darkSprite),this._mask.numChildren-1)}this.parent&&this.parent.contains(this._mask)&&this.parent.removeChild(this._mask)},e.getInstance=function(){return null==e.instance&&(e.instance=new e),e.instance},e}();__reflect(BGUpManager.prototype,"BGUpManager");var DlgManager=function(){function e(){}return e.prototype.popDlg=function(e,t,r,n,i,o){if(void 0===t&&(t=""),void 0===r&&(r=null),void 0===n&&(n=null),void 0===i&&(i=1),void 0===o&&(o=.6),t){var a=new Handler(this,this.onLoad,[e,r,n,!0,i,o]);ResLoad.getInstance().LoadRes(t,a)}else{var s=this.makeDlg(e,r,n);this.addPopDlg(s,i,o)}},e.prototype.popClickDlg=function(e,t,r){void 0===t&&(t=null),void 0===r&&(r=null);var n=this.makeDlg(e,t,r);PopUpManager.getInstance().addPopUp(n,!1,0,0,0,!1,0)},e.prototype.dlgClose=function(e,t){void 0===t&&(t=0);var r=UIPool.getInstance().getObject(e);r&&(PopUpManager.getInstance().removePopUp(r,t),UIPool.getInstance().destroyObject(r))},e.prototype.closeAllDlg=function(){PopUpManager.getInstance().closeAllDlg()},e.prototype.makeDlg=function(e,t,r){var n=UIPool.getInstance().createObject(e);return n._closeHander=t,n.data=r,n},e.prototype.onLoad=function(e,t,r,n,i,o,a){var s=this.makeDlg(e,t,r);this.addPopDlg(s,i,o)},e.prototype.addPopDlg=function(e,t,r){void 0===t&&(t=0),PopUpManager.getInstance().addPopUp(e,!0,0,0,t,!1,r)},e}();__reflect(DlgManager.prototype,"DlgManager");var GameLayerManager=function(e){function t(){var t=e.call(this)||this;return t.sceneLayer=new eui.UILayer,t.mainLayer=new eui.UILayer,t.panelLayer=new eui.UILayer,t.effectLayer=new eui.UILayer,t.maskLayer=new eui.UILayer,t.loadLayer=new eui.UILayer,t.init(),t}return __extends(t,e),t.gameLayer=function(){return this._instance||(this._instance=new t),this._instance},t.prototype.init=function(){this.touchThrough=!0,this.sceneLayer.touchThrough=!0,this.mainLayer.touchThrough=!0,this.panelLayer.touchThrough=!0,this.effectLayer.touchThrough=!0,this.maskLayer.touchThrough=!0,this.loadLayer.touchThrough=!0,this.addChild(this.sceneLayer),this.addChild(this.mainLayer),this.addChild(this.panelLayer),this.addChild(this.effectLayer),this.addChild(this.maskLayer),this.addChild(this.loadLayer)},t}(eui.UILayer);__reflect(GameLayerManager.prototype,"GameLayerManager");var JsonManager=function(){function e(){this._jsonArry=[{DicServerInfo:DicServerInfo,name:"serverInfo_json"}],this.realClass=new Object,this.realName=new Object,this._closeHander=null,this._proHander=null}return e.prototype.getClass=function(e){return this.realClass[e]},e.prototype.init=function(){this.makeClass()},e.prototype.loadJson=function(e,t,r){void 0===t&&(t=null),void 0===r&&(r=null),this._closeHander=t,this._proHander=r,RES.addEventListener(RES.ResourceEvent.GROUP_COMPLETE,this.onResourceLoadComplete,this),RES.addEventListener(RES.ResourceEvent.GROUP_LOAD_ERROR,this.onResourceLoadError,this),RES.addEventListener(RES.ResourceEvent.GROUP_PROGRESS,this.onResourceProgress,this),RES.loadGroup(e)},e.prototype.makeClass=function(){for(var e=this,t=e._jsonArry.length,r=0;t>r;r++){var n=e._jsonArry[r];for(var i in n){var o=n.name;if("name"!==String(i)){var a=new n[i];a.constructor.apply(a),e.realClass[i]=a,e.realName[o]=i}}}},e.prototype.onResourceLoadComplete=function(e){this.clearResLoad();for(var t=e.groupName,r=RES.getGroupByName(t),n=r.length,i=0;n>i;i++){var o=r[i],a=this.getClass(this.realName[o.data.name]),s=a;s&&s.initFromJson(o.data.name)}this._closeHander&&this._closeHander.executeWith([t])},e.prototype.onResourceLoadError=function(e){Log.trace("msg",e),Log.trace("json","json文件加载失败 = "+e.groupName)},e.prototype.onResourceProgress=function(e){this._proHander&&this._proHander.executeWith([e.itemsLoaded,e.itemsTotal])},e.prototype.clearResLoad=function(){RES.removeEventListener(RES.ResourceEvent.GROUP_COMPLETE,this.onResourceLoadComplete,this),RES.removeEventListener(RES.ResourceEvent.GROUP_LOAD_ERROR,this.onResourceLoadError,this),RES.removeEventListener(RES.ResourceEvent.GROUP_PROGRESS,this.onResourceProgress,this)},e}();__reflect(JsonManager.prototype,"JsonManager");var LocalStorageManager=function(){function e(){}return Object.defineProperty(e,"instance",{get:function(){return e._instance||(e._instance=new e),e._instance},enumerable:!0,configurable:!0}),e}();__reflect(LocalStorageManager.prototype,"LocalStorageManager");var PlayerManager=function(){function e(){this.pclassMap={},this.realClass=new Object}return e.prototype.init=function(){this.makeClass()},e.prototype.makeClass=function(){for(var e in this.pclassMap){var t=new this.pclassMap[e];this.realClass[e]=t}},e.prototype.msgDo=function(e,t){},e.prototype.getClass=function(e){return this.realClass[e]},e}();__reflect(PlayerManager.prototype,"PlayerManager");var PopUpManager=function(){function e(){this._mask=new eui.UILayer,this.darkSprite=new eui.Rect,this.darkSprite.fillColor=0,this.darkSprite.top=0,this.darkSprite.bottom=0,this._mask.addChild(this.darkSprite)}return e.getInstance=function(){return e.instance||(e.instance=new e),e.instance},e.prototype.reSizePop=function(){if(!(this._mask.numChildren<=1))for(var e=0;e<this._mask.numChildren;e++){var t=this._mask.getChildAt(e);t instanceof UIObject&&this.resizePannel(t)}},e.prototype.resizePannel=function(e){var t=e.width,r=e.height;e.x=GM.gamec.curWidth()/2-t/2,e.y=GM.gamec.curHeight()/2-r/2},e.prototype.addPopUp=function(e,t,r,n,i,o,a){if(void 0===t&&(t=!1),void 0===r&&(r=0),void 0===n&&(n=0),void 0===i&&(i=0),void 0===o&&(o=!1),!GameLayerManager.gameLayer().panelLayer.contains(e)){e.scaleX=1,e.scaleY=1,e.x=0,e.y=0,e.alpha=1,t?(this.darkSprite.width=GM.gamec.curWidth(),this.darkSprite.height=GM.gamec.curHeight(),this.darkSprite.alpha=a,this.darkSprite.touchEnabled=!0,this.darkSprite.visible=!0):this.darkSprite.visible=!1,this._mask.left=0,this._mask.right=0,this._mask.addChild(e),this._mask.swapChildrenAt(this._mask.getChildIndex(this.darkSprite),this._mask.numChildren-2),GameLayerManager.gameLayer().panelLayer.contains(this._mask)||GameLayerManager.gameLayer().panelLayer.addChild(this._mask),GM.gamec.curPanel=e,0!==r?(e.x=GM.gamec.curWidth()/2-r/2,e.y=GM.gamec.curHeight()/2-n/2):(r=e.width,n=e.height,e.x=GM.gamec.curWidth()/2-r/2,e.y=GM.gamec.curHeight()/2-n/2),e.x<0&&(e.x=0),e.y<0&&(e.y=0);var s=GM.gamec.curWidth()/2-r/2,c=GM.gamec.curHeight()/2-n/2;switch(i){case 0:break;case 1:e.alpha=0,e.scaleX=.5,e.scaleY=.5,e.x=e.x+r/4,e.y=e.y+n/4,egret.Tween.get(e).to({alpha:1,scaleX:1,scaleY:1,x:e.x-r/4,y:e.y-n/4},300,egret.Ease.backOut);break;case 2:e.alpha=0,e.scaleX=.5,e.scaleY=.5,e.x=e.x+r/4,e.y=e.y+n/4,egret.Tween.get(e).to({alpha:1,scaleX:1,scaleY:1,x:e.x-r/4,y:e.y-n/4},600,egret.Ease.elasticOut);break;case 3:o?(e.x=-r,egret.Tween.get(e).to({x:s},500,egret.Ease.cubicOut)):(e.x=-r,egret.Tween.get(e).to({x:0},500,egret.Ease.cubicOut));break;case 4:o?(e.x=r,egret.Tween.get(e).to({x:s},500,egret.Ease.cubicOut)):(e.x=r,egret.Tween.get(e).to({x:0},500,egret.Ease.cubicOut));break;case 5:o?(e.y=-n,egret.Tween.get(e).to({y:c},500,egret.Ease.cubicOut)):(e.y=-n,egret.Tween.get(e).to({y:c},500,egret.Ease.cubicOut));break;case 6:o?(e.y=GM.gamec.curHeight(),egret.Tween.get(e).to({y:c},500,egret.Ease.cubicOut)):(e.y=n,egret.Tween.get(e).to({y:0},500,egret.Ease.cubicOut))}}},e.prototype.removePopUp=function(e,t){void 0===t&&(t=0);var r=function(e){};switch(this.darkSprite&&egret.Tween.get(this.darkSprite).to({alpha:0},100).call(r,this,[this.darkSprite]),t){case 0:break;case 1:egret.Tween.get(e).to({alpha:0,scaleX:0,scaleY:0,x:e.x+e.width/2,y:e.y+e.height/2},300);break;case 2:break;case 3:egret.Tween.get(e).to({x:e.width},500,egret.Ease.cubicOut);break;case 4:egret.Tween.get(e).to({x:-e.width},500,egret.Ease.cubicOut);break;case 5:egret.Tween.get(e).to({y:e.height},500,egret.Ease.cubicOut);break;case 6:egret.Tween.get(e).to({y:-e.height},500,egret.Ease.cubicOut)}var n=500;0===t&&(n=0),egret.setTimeout(this.close,this,n,e)},e.prototype.close=function(e){this._mask.contains(e)&&this._mask.removeChild(e),this._mask.numChildren>1?this._mask.swapChildrenAt(this._mask.getChildIndex(this.darkSprite),this._mask.numChildren-2):GameLayerManager.gameLayer().panelLayer.contains(this._mask)&&GameLayerManager.gameLayer().panelLayer.removeChild(this._mask)},e.prototype.closeAllDlg=function(){for(;this._mask.numChildren>1;){var e=this._mask.getChildAt(0);e instanceof UIObject?(this._mask.removeChild(e),UIPool.getInstance().destroyObject(e)):this._mask.swapChildrenAt(this._mask.getChildIndex(this.darkSprite),this._mask.numChildren-1)}GameLayerManager.gameLayer().panelLayer.contains(this._mask)&&GameLayerManager.gameLayer().panelLayer.removeChild(this._mask)},e}();__reflect(PopUpManager.prototype,"PopUpManager");var ResInfo=function(){function e(){this._endHander=null,this._proHander=null,this._loadDlg=!1,this._groups="",this._sec=0}return e}();__reflect(ResInfo.prototype,"ResInfo");var ResLoad=function(){function e(){this._progressHander=null,this._callBackMap={},this._callBackQueue=[]}return e.getInstance=function(){return e.instance||(e.instance=new e),e.instance},e.prototype.LoadRes=function(e,t,r){if(void 0===t&&(t=null),void 0===r&&(r=null),Log.trace("msg","加载的资源组: "+e),""===e)return void Log.trace("error","加载的资源组名称为空");if(RES.isGroupLoaded(e))return Log.trace("msg","资源组: "+e+"已加载过"),void(t&&t.executeWith([e]));var n=this._callBackMap[e];return n?void n.push(t):(this._callBackMap[e]=[t],RES.addEventListener(RES.ResourceEvent.GROUP_COMPLETE,this.onResourceLoadComplete,this),RES.addEventListener(RES.ResourceEvent.GROUP_LOAD_ERROR,this.onResourceLoadError,this),RES.addEventListener(RES.ResourceEvent.GROUP_PROGRESS,this.onResourceProgress,this),void RES.loadGroup(e))},e.prototype.LoadResByQueue=function(e,t,r){if(void 0===t&&(t=null),void 0===r&&(r=null),Log.trace("msg","加载的资源组: "+e),""===e)return void Log.trace("error","加载的资源组名称为空");if(RES.isGroupLoaded(e))return Log.trace("msg","资源组: "+e+"已加载过"),void(t&&t.executeWith([e]));var n=this._callBackQueue.length;this._callBackQueue[n]={name:e,handler:t,done:!1,loaded:!1},RES.addEventListener(RES.ResourceEvent.GROUP_COMPLETE,this.onResourceLoadComplete,this),RES.addEventListener(RES.ResourceEvent.GROUP_LOAD_ERROR,this.onResourceLoadError,this),RES.addEventListener(RES.ResourceEvent.GROUP_PROGRESS,this.onResourceProgress,this),RES.loadGroup(e)},e.prototype.executeQueue=function(e){for(var t=this._callBackQueue.length,r=0;t>r;r++){var n=this._callBackQueue[r];if(n&&!n.done){if(!n.loaded)break;n.done=!0;var i=n.handler;Log.trace("msg","==资源组加载完成执行回调=="+n.name),i&&i.executeWith([n.name])}}},e.prototype.onResourceLoadComplete=function(e){if(Log.trace("msg","资源组 "+e.groupName+" 加载完成"),e&&e.groupName){for(var t=this._callBackQueue.length,r=0;t>r;r++){var n=this._callBackQueue[r];n&&n.name===e.groupName&&(n.loaded=!0)}this.executeQueue(e.groupName);var i=this._callBackMap[e.groupName];delete this._callBackMap[e.groupName];for(var o=i?i.length:0,a=0;o>a;a++){var s=i[a];s&&s.executeWith([e.groupName])}}},e.prototype.onResourceLoadError=function(e){Log.trace("msg","图片资源加载错误"+e)},e.prototype.onResourceProgress=function(e){Log.trace("msg","onResourceProgress:"+e.groupName),Log.trace("msg","onResourceProgress_event.itemsLoaded:"+e.itemsLoaded),Log.trace("msg","onResourceProgress_event.itemsTotal:"+e.itemsTotal),this._progressHander&&this._progressHander.executeWith([e.itemsLoaded,e.itemsTotal])},e.prototype.clearResLoad=function(){RES.removeEventListener(RES.ResourceEvent.GROUP_COMPLETE,this.onResourceLoadComplete,this),RES.removeEventListener(RES.ResourceEvent.GROUP_LOAD_ERROR,this.onResourceLoadError,this),RES.removeEventListener(RES.ResourceEvent.GROUP_PROGRESS,this.onResourceProgress,this)},e}();__reflect(ResLoad.prototype,"ResLoad");var SceneInfo=function(){function e(){this.classFactory=null,this.resName="",this.data=null}return e}();__reflect(SceneInfo.prototype,"SceneInfo");var SceneManager=function(){function e(){this._oldScene=null,this._currScene=null,this._loadingScene=!1,this._loadArray=new Array}return e.prototype.runScene=function(e,t,r){return void 0===r&&(r=null),Log.trace("msg","运行前场景========"+e.key+"===="+this._loadingScene),this._loadingScene?void this.insertSceneInfo(e,t,r):void(this.addNext()||(this._loadingScene=!0,this._currScene=e,this._data=r,ResLoad.getInstance().LoadResByQueue(t,new Handler(this,this.loadEnd))))},e.prototype.loadEnd=function(e){this._oldScene&&GameLayerManager.gameLayer().sceneLayer.contains(this._oldScene)&&(GameLayerManager.gameLayer().sceneLayer.removeChild(this._oldScene),UIPool.getInstance().destroyObject(this._oldScene)),Log.trace("msg","运行后场景==="+this._currScene.key);var t=UIPool.getInstance().createObject(this._currScene);if(t)if(GameLayerManager.gameLayer().sceneLayer.contains(t))Log.trace("msg","画布中已经有该场景:"+this._currScene.key);else{Log.trace("msg","画布中没有该场景:"+this._currScene.key),t.data=this._data;var r=GameLayerManager.gameLayer().sceneLayer.addChild(t);r?this._oldScene=t:Log.trace("msg","加入场景失败")}this._loadArray.length<=0&&(this._loadingScene=!1),this.addNext()},e.prototype.insertSceneInfo=function(e,t,r){void 0===r&&(r=null);var n=new SceneInfo;n.classFactory=e,n.resName=t,n.data=r,this._loadArray.push(n)},e.prototype.addNext=function(){if(this._loadArray.length<=0)return!1;this._loadingScene=!0;var e=this._loadArray.shift();return this._currScene=e.classFactory,this._data=e.data,ResLoad.getInstance().LoadResByQueue(e.resName,new Handler(this,this.loadEnd)),!0},e}();__reflect(SceneManager.prototype,"SceneManager");var SoundManager=function(e){function t(){var t=e.call(this)||this;return t.bg=new SoundBg,t.effect=new SoundEffects,t.bgVolume=.5,t.effectVolume=.5,t.bgOn=!0,t.effectOn=!0,t.bg.setVolume(t.bgVolume),t.effect.setVolume(t.effectVolume),t}return __extends(t,e),t.prototype.playEffect=function(e){t.IS_OPEN_SOUND&&this.effectOn&&this.effect.play(e,this.effectVolume)},t.prototype.playBg=function(e,r,n,i){void 0===r&&(r=.5),void 0===n&&(n=0),void 0===i&&(i=null),t.IS_OPEN_SOUND&&(this.currBg!=e&&this.bg&&this.bg.stop(),this.currBg=e,this.bgOn&&this.bg.play(e,r,n,i))},t.prototype.continuePlayBg=function(){t.IS_OPEN_SOUND&&this.bg.continuePlay()},t.prototype.stopBg=function(){this.bg.stop()},t.prototype.setEffectOn=function(e){this.effectOn=e},t.prototype.setBgOn=function(e){this.bgOn=e,this.bgOn?this.currBg&&this.playBg(this.currBg,0):this.stopBg()},t.prototype.setBgVolume=function(e){e=Math.min(e,1),e=Math.max(e,0),this.bgVolume=e,this.bg.setVolume(this.bgVolume)},t.prototype.getBgVolume=function(){return this.bgVolume},t.prototype.setEffectVolume=function(e){e=Math.min(e,1),e=Math.max(e,0),this.effectVolume=e,this.effect.setVolume(this.effectVolume)},t.prototype.getEffectVolume=function(){return this.effectVolume},t.CLEAR_TIME=18e4,t.IS_OPEN_SOUND=!1,t}(BaseClass);__reflect(SoundManager.prototype,"SoundManager");var GameSocketNew=function(){function e(){if(e.instance)throw new Error("GameSocket instance has already been constructed!");e.instance=this,e.connected=!1}return e.getInstance=function(){return e.instance||(e.instance=new e),e.instance},e.setInstanceNull=function(){e.instance=null},e.prototype.register=function(e){if(!e)throw new Error("Cannot registe a null hanlder to GameSocket");this.listener=e},e.prototype.unRegister=function(){this.listener=null},e.prototype.getConnected=function(){return e.connected},e.prototype.connect=function(t,r){Log.trace("com","GameSocketNew.connect()"),this.resetConnect();var n="wss://"+t+":"+r;Log.trace("wss","wss="+n);var i=GM.jm.getClass("DicServerInfo");1==i.usehttps?e.socket.connectByUrl(n):e.socket.connect(t,r)},e.prototype.close=function(){e.socket&&e.socket.connected&&e.socket.close()},e.prototype.sendPackage=function(t,r){if(!e.socket.connected)return void Log.trace("com","GameSocket.sendPackage(), 无连接");var n=new egret.ByteArray;n.writeShort(r.length+4),n.writeShort(t),n.writeBytes(r,0,r.length),n.position=0,e.socket.writeBytes(n),e.socket.flush()},e.prototype.init=function(){e.socket=new egret.WebSocket,e.socket.type=egret.WebSocket.TYPE_BINARY,e.socket.addEventListener(egret.ProgressEvent.SOCKET_DATA,this.revSocketDataHandler,this),e.socket.addEventListener(egret.Event.CONNECT,this.connectHandler,this),e.socket.addEventListener(egret.Event.CLOSE,this.closeHandler,this),e.socket.addEventListener(egret.IOErrorEvent.IO_ERROR,this.errorHandler,this)},e.prototype.resetConnect=function(){e.socket&&(e.socket.removeEventListener(egret.ProgressEvent.SOCKET_DATA,this.revSocketDataHandler,this),e.socket.removeEventListener(egret.Event.CONNECT,this.connectHandler,this),e.socket.removeEventListener(egret.Event.CLOSE,this.closeHandler,this),e.socket.removeEventListener(egret.IOErrorEvent.IO_ERROR,this.errorHandler,this),e.socket=null),this.init()},e.prototype.connectHandler=function(t){Log.trace("com","GameSocket.connectHandler(), socket 连接成功"),e.connected=!0,this.excuteHandle(egret.Event.CONNECT,t)},e.prototype.revSocketDataHandler=function(t){Log.trace("com","WebSocket receiveData");var r=new egret.ByteArray;e.socket.readBytes(r),r.position=0;var n=r.readShort(),i=r.readShort();Log.trace("com","packLen",n,"msgId",i);var o=new egret.ByteArray;o.writeBytes(r,0,n),o.position=4,this.listener.onMessageReceived(i,o)},e.prototype.closeHandler=function(t){Log.trace("com","WebSocket close"),e.connected=!1,this.excuteHandle(egret.Event.CLOSE,t)},e.prototype.errorHandler=function(t){Log.trace("com","egret io_error"),e.connected=!1,this.excuteHandle(egret.IOErrorEvent.IO_ERROR,t)},e.prototype.excuteHandle=function(e,t){switch(e){case egret.Event.CONNECT:this.listener.onConnect();break;case egret.Event.CLOSE:this.listener.onDisConnect(),Log.trace("com","GameSocket.excuteHandle(), 数据连接关闭");break;case egret.IOErrorEvent.IO_ERROR:this.listener.onDisConnect(),Log.trace("com","GameSocket.excuteHandle(), 数据连接异常!")}},e.connected=!1,e}();__reflect(GameSocketNew.prototype,"GameSocketNew");var GM=function(){function e(){}return e.init=function(){this.gamec=new GameConfigManager,this.pm=new PlayerManager,this.pm.init(),this.jm=new JsonManager,this.jm.init(),this.dlg=new DlgManager,this.scene=new SceneManager,this.sound=new SoundManager,this.debugKey=new HashMap,window.addEventListener("message",e.execMessage,!1),Log.trace("msg","FrameworkVersion:"+BaseDefines.FrameworkVersion)},e.execMessage=function(e){if(e.source===window.parent){var t=e.data,r=t;Log.trace("msg",r);try{t=JSON.parse(t)}catch(n){Log.trace("error",n)}if("onJumpPage"===t.method){var i=Number(t.toPage);lcp.LListener.getInstance().dispatchEvent(new lcp.LEvent(BaseDefines.TKCLOUD_TYPE.TO_PAGE,i,!1))}else"onFileMessage"===t.method&&UIPool.getInstance().execMessage(t)}},e.setTime=function(e){this._serverTime=Number(e),this._curTime=egret.getTimer()},e.getTime=function(e){var t=egret.getTimer()-this._curTime,r=this._serverTime+t/1e3,n=e-r;return 0>n&&(n=0),n},e.isDebug=!0,e}();__reflect(GM.prototype,"GM");var HttpServer=function(e){function t(){return e.call(this)||this}return __extends(t,e),t.getInstance=function(){return null==t.instance&&(t.instance=new t),t.instance},t.prototype.sendHttpMsg=function(e,t,r){var n=GM.jm.getClass("DicServerInfo"),i=n.serverUrl+e;this.SendUrlHttpMsg(i,t,r)},t.prototype.sendHttpMsgWithType=function(e,t,r,n,i){var o=GM.jm.getClass("DicServerInfo"),a=o.serverUrl+e;this.SendUrlHttpMsg(a,t,r,n,i)},t}(HttpConnect);__reflect(HttpServer.prototype,"HttpServer");var MessageManager=function(e){function t(){var r=e.call(this)||this;if(t.instance)throw new Error("GameSocket instance has already been constructed!");return t.instance=null,r}return __extends(t,e),t.getInstance=function(){return t.instance||(t.instance=new t),t.instance},t}(TcpServer);__reflect(MessageManager.prototype,"MessageManager");var UIObject=function(e){function t(){var t=e.call(this)||this;return t.keyName="",t.data=null,t._closeHander=null,t}return __extends(t,e),t.prototype.onCreate=function(){this.addEventListener(egret.Event.ADDED_TO_STAGE,this.onAddStage,this),this.addEventListener(eui.UIEvent.CHANGE_END,this.onAddEnd,this)},t.prototype.onCreateChildren=function(){},t.prototype.onAddEnd=function(e){this.removeEventListener(eui.UIEvent.CHANGE_END,this.onAddEnd,this),this.onJoin()},t.prototype.onAddStage=function(e){this.removeEventListener(egret.Event.ADDED_TO_STAGE,this.onAddStage,this),this.onAdd(),t.guid&&t.guid.execute()},t.prototype.onJoin=function(){},t.prototype.onAdd=function(){},t.prototype.onEnterFrame=function(e){},t.prototype.msgDo=function(e,t){},t.prototype.execMessage=function(e){},t.prototype.onDestroy=function(){},t.prototype.onClose=function(e,t){void 0===t&&(t=null),this._closeHander&&this._closeHander.executeWith([e,t])},t.prototype.onDlgClose=function(e,t,r){void 0===t&&(t=null),void 0===r&&(r=0),this.onClose(e,t),GM.dlg.dlgClose(e,r)},t.prototype.onDlgOnlyClose=function(e,t){void 0===t&&(t=0),GM.dlg.dlgClose(e,t)},t}(eui.Component);__reflect(UIObject.prototype,"UIObject");var App=function(){function e(){}return Object.defineProperty(e,"TimerManager",{get:function(){return TimerManager.getInstance()},enumerable:!0,configurable:!0}),Object.defineProperty(e,"DateUtils",{get:function(){return DateUtils.getInstance()},enumerable:!0,configurable:!0}),Object.defineProperty(e,"MathUtils",{get:function(){return MathUtils.getInstance()},enumerable:!0,configurable:!0}),Object.defineProperty(e,"RandomUtils",{get:function(){return RandomUtils.getInstance()},enumerable:!0,configurable:!0}),Object.defineProperty(e,"BitmapNumber",{get:function(){return BitmapNumber.getInstance()},enumerable:!0,configurable:!0}),Object.defineProperty(e,"StageUtils",{get:function(){return StageUtils.getInstance()},enumerable:!0,configurable:!0}),Object.defineProperty(e,"StringUtils",{get:function(){return StringUtils.getInstance()},enumerable:!0,configurable:!0}),Object.defineProperty(e,"CommonUtils",{get:function(){return CommonUtils.getInstance()},enumerable:!0,configurable:!0}),Object.defineProperty(e,"DeviceUtils",{get:function(){return DeviceUtils.getInstance()},enumerable:!0,configurable:!0}),Object.defineProperty(e,"ShockUtils",{get:function(){return ShockUtils.getInstance()},enumerable:!0,configurable:!0}),Object.defineProperty(e,"TextFlowMaker",{get:function(){return TextFlowMaker.getInstance()},enumerable:!0,configurable:!0}),Object.defineProperty(e,"ArrayUtils",{get:function(){return ArrayUtils.getInstance()},enumerable:!0,configurable:!0}),Object.defineProperty(e,"ResourceUtils",{get:function(){return ResourceUtils.getInstance()},enumerable:!0,configurable:!0}),Object.defineProperty(e,"VideoTools",{get:function(){return VideoTools.instance},enumerable:!0,configurable:!0}),e.Init=function(){},e}();__reflect(App.prototype,"App");var ActMovie=function(){function e(){}return e.getInstance=function(){return null==e.instance&&(e.instance=new e),e.instance
},e.prototype.getMovieClip=function(e,t){var r=e+"_json",n=RES.getRes(r),i=RES.getRes(e+"_png"),o=new egret.MovieClipDataFactory(n,i),a=new egret.MovieClip(o.generateMovieClipData(t));return a},e}();__reflect(ActMovie.prototype,"ActMovie");var ArrayUtils=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.forEach=function(e,t,r){for(var n=0,i=e.length;i>n;n++)t.apply(r,[e[n]])},t.prototype.addToltal=function(e){for(var t=e.length,r=0,n=0;t>n;n++)r+=Number(e[n]);return r},t.prototype.findMin=function(e){if(0===e.length)return 0;for(var t=Number(e[0]),r=e.length,n=0;r>n;n++){var i=Number(e[n]);t>i&&(t=i)}return t},t.prototype.findMax=function(e){for(var t=Number(e[0]),r=e.length,n=0;r>n;n++){var i=Number(e[n]);i>t&&(t=i)}return t},t.prototype.findForm=function(e,t){for(var r=e.length,n=0;r>n;n++)if(e[n]===t)return!0;return!1},t}(BaseClass);__reflect(ArrayUtils.prototype,"ArrayUtils");var AverageUtils=function(){function e(e){void 0===e&&(e=10),this.nums=[],this.numsLen=0,this.numSum=0,this.maxNum=e}return e.prototype.push=function(e){this.numsLen>this.maxNum&&(this.numsLen--,this.numSum-=this.nums.shift()),this.nums.push(e),this.numSum+=e,this.numsLen++},e.prototype.getValue=function(){return this.numSum/this.numsLen},e.prototype.clear=function(){this.nums.splice(0),this.numsLen=0,this.numSum=0},e}();__reflect(AverageUtils.prototype,"AverageUtils");var tiled;!function(e){var t=function(){function e(){}return Object.defineProperty(e,"nativeBase64",{get:function(){return"function"==typeof window.atob},enumerable:!0,configurable:!0}),e.decode=function(e){if(e=e.replace(/[^A-Za-z0-9\+\/\=]/g,""),this.nativeBase64)return window.atob(e);for(var t=[],r=void 0,n=void 0,i=void 0,o=void 0,a=void 0,s=void 0,c=void 0,h=0;h<e.length;)o=this._keyStr.indexOf(e.charAt(h++)),a=this._keyStr.indexOf(e.charAt(h++)),s=this._keyStr.indexOf(e.charAt(h++)),c=this._keyStr.indexOf(e.charAt(h++)),r=o<<2|a>>4,n=(15&a)<<4|s>>2,i=(3&s)<<6|c,t.push(String.fromCharCode(r)),64!==s&&t.push(String.fromCharCode(n)),64!==c&&t.push(String.fromCharCode(i));return t=t.join("")},e.encode=function(e){e=e.replace(/\r\n/g,"\n");for(var t,r,n,i,o,a,s,c=[],h=0;h<e.length;)t=e.charCodeAt(h++),r=e.charCodeAt(h++),n=e.charCodeAt(h++),i=t>>2,o=(3&t)<<4|r>>4,a=(15&r)<<2|n>>6,s=63&n,isNaN(r)?a=s=64:isNaN(n)&&(s=64),c.push(this._keyStr.charAt(i)),c.push(this._keyStr.charAt(o)),c.push(this._keyStr.charAt(a)),c.push(this._keyStr.charAt(s));return c=c.join(""),Log.trace("mi","返回= "+c),c},e.decodeBase64AsArray=function(t,r){r=r||1;var n,i,o,a=e.decode(t),s=new Uint32Array(a.length/r);for(n=0,o=a.length/r;o>n;n++)for(s[n]=0,i=r-1;i>=0;--i)s[n]+=a.charCodeAt(n*r+i)<<(i<<3);return s},e.decompress=function(e,t,r){throw new Error("GZIP/ZLIB compressed TMX Tile Map not supported!")},e.decodeCSV=function(e){for(var t=e.replace("\n","").trim().split(","),r=[],n=0;n<t.length;n++)r.push(+t[n]);return r},e._keyStr="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",e}();e.Base64=t,__reflect(t.prototype,"tiled.Base64")}(tiled||(tiled={}));var UIPool=function(){function e(){this._pool=new HashMap,egret.Ticker.getInstance().register(this.onEnterFrame,this)}return e.getInstance=function(){return e.instance||(e.instance=new e),e.instance},e.prototype.msgDO=function(e,t){for(var r=this._pool.values(),n=0,i=r.length;i>n;n++){var o=r[n];o.parent&&o.msgDo(e,t)}},e.prototype.execMessage=function(e){for(var t=this._pool.values(),r=0,n=t.length;n>r;r++){var i=t[r];i.parent&&i.execMessage(e)}},e.prototype.createObject=function(e){var t,r=e.key;return t=this._pool.getValue(r),t||(t=new e,this._pool.put(r,t),t.onCreateChildren()),t.keyName=r,t.onCreate(),t},e.prototype.getObject=function(e){return this._pool.getValue(e)},e.prototype.destroyObject=function(e){e.onDestroy()},e.prototype.onEnterFrame=function(e){for(var t=this._pool.values(),r=0,n=t.length;n>r;r++){var i=t[r];i.parent||i.onEnterFrame(e)}},e}();__reflect(UIPool.prototype,"UIPool");var BitmapNumber=function(e){function t(){var t=e.call(this)||this;return t._imgPool=[],t._containerPool=[],t}return __extends(t,e),t.prototype.createNumPic=function(e,t,r){void 0===r&&(r=!1);var n,i=this.getContainer(),o=e.toString(),a=0;if(r)n=this.getSingleNumPic(o,t),i.addChild(n);else for(a;a<o.length;a++)n=this.getSingleNumPic(o.charAt(a),t),i.addChild(n);return this.repositionNumPic(i),i},t.prototype.desstroyNumPic=function(e){this.clearContainer(e),e.parent&&e.parent.removeChild(e)},t.prototype.changeNum=function(e,t,r){var n=t.toString();if(e.numChildren>n.length)for(;e.numChildren>n.length;)this.recycleBM(e.getChildAt(e.numChildren-1));var i,o=0;for(o;o<n.length;o++)o>=e.numChildren&&e.addChild(this.getBitmap()),i=n.charAt(o),i="."===i?"dot":i,e.getChildAt(o).texture=this.getTexture(i,r);this.repositionNumPic(e)},t.prototype.repositionNumPic=function(e){var t,r=0,n=0;for(r;r<e.numChildren;r++)t=e.getChildAt(r),t.x=n,n=t.x+t.width},t.prototype.clearContainer=function(e){for(;e.numChildren;)this.recycleBM(e.removeChildAt(0))},t.prototype.recycleBM=function(e){e&&e.parent&&(e.parent.removeChild(e),e.texture=null,this._imgPool.push(e))},t.prototype.getContainer=function(){return this._containerPool.length?this._containerPool.shift():new egret.DisplayObjectContainer},t.prototype.getSingleNumPic=function(e,t){"."===e&&(e="dot");var r=this.getBitmap();return r.texture=this.getTexture(e,t),r},t.prototype.getTexture=function(e,t){return RES.getRes(t+e+"_png")},t.prototype.getBitmap=function(){return this._imgPool.length?this._imgPool.shift():new egret.Bitmap},t}(BaseClass);__reflect(BitmapNumber.prototype,"BitmapNumber");var CommonUtils=function(e){function t(){return e.call(this)||this}return __extends(t,e),t.addLableStrokeColor=function(e,t,r){var n=e;n.strokeColor=t,n.stroke=r},t.copyDataHandler=function(e){var t;if(e instanceof Array)t=[];else{if(!(e instanceof Object))return e;t={}}for(var r=Object.keys(e),n=0,i=r.length;i>n;n++){var o=r[n];t[o]=this.copyDataHandler(e[o])}return t},t.lock=function(){App.StageUtils.getStage().touchEnabled=App.StageUtils.getStage().touchChildren=!1},t.unlock=function(){App.StageUtils.getStage().touchEnabled=App.StageUtils.getStage().touchChildren=!0},t.int64ToNumber=function(e){return parseInt(e.toString())},t.labelIsOverLenght=function(e,t){var r=null;r=1e5>t?t:1e6>t?Math.floor(t/1e3/10).toString()+"万":Math.floor(t/1e4).toString()+"万",e.text=r},t}(BaseClass);__reflect(CommonUtils.prototype,"CommonUtils");var DateUtils=function(e){function t(){return e.call(this)||this}return __extends(t,e),t.prototype.compareDay=function(e){var t=new Date,r=this.getDate(e),n=t.getTime()-r.getTime();return n>0?!0:!1},t.prototype.compareMatch=function(e,t){var r=new Date,n=this.getDate(e),i=r.getTime()-n.getTime();return i>0?i>60*t*60*1e3?2:1:0},t.prototype.getDate=function(e){var t=e.split(" "),r=t[0],n=r.split("-"),i=t[1],o=i.split(":"),a=new Date(Number(n[0]),Number(n[1])-1,Number(n[2]),Number(o[0]),Number(o[1]));return a},t.prototype.getXiaoTime=function(e){var t=e.split(" ");return t[1]},t.prototype.getFormatBySecond=function(e,t){void 0===t&&(t=1);var r="";switch(t){case 1:r=this.getFormatBySecond1(e);break;case 2:r=this.getFormatBySecond2(e);break;case 3:r=this.getFormatBySecond3(e);break;case 4:r=this.getFormatBySecond4(e);break;case 5:r=this.getFormatBySecond5(e);break;case 6:r=this.getFormatBySecond6(e);break;case 7:r=this.getFormatBySecond7(e);break;case 8:r=this.getFormatBySecond8(e)}return r},t.prototype.formatDate=function(e){var t=e.getFullYear(),r=e.getMonth()+1,n=e.getDate();return t+"-"+r+"-"+n},t.prototype.isLeapYear=function(e){return e%4===0&&(e%100!==0||e%400===0)},t.prototype.getFormatBySecond1=function(e){void 0===e&&(e=0);var t,r=Math.floor(e/3600);t=0===r?"00":10>r?"0"+r:""+r;var n,i,o=Math.floor((e-3600*r)/60),a=Math.floor((e-3600*r)%60);return n=0===o?"00":10>o?"0"+o:""+o,i=0===a?"00":10>a?"0"+a:""+a,t+":"+n+":"+i},t.prototype.getFormatBySecond3=function(e){void 0===e&&(e=0);var t,r,n=Math.floor(e/3600),i=Math.floor((e-3600*n)/60),o=Math.floor((e-3600*n)%60);return t=0===i?"00":10>i?"0"+i:""+i,r=0===o?"00":10>o?"0"+o:""+o,t+":"+r},t.prototype.getFormatBySecond2=function(e){var t=new Date(e),r=t.getFullYear(),n=t.getMonth()+1,i=t.getDate(),o=t.getHours(),a=t.getMinutes(),s=t.getSeconds();return r+"-"+n+"-"+i+" "+o+":"+a+":"+s},t.prototype.getFormatBySecond4=function(e){var t=Math.floor(e/3600);return t>0?t>24?Math.floor(t/24)+"天前":t+"小时前":Math.floor(e/60)+"分钟前"},t.prototype.getFormatBySecond5=function(e){var t=86400,r=3600,n=60,i=Math.floor(e/t),o=Math.floor(e%t/r),a=Math.floor((e-o*r)/n),s=Math.floor((e-o*r)%n),c="",h="",l="",u="";return e>0?0===i?(c="",0===o?(h="",0===a?(l="",u=0===s?"":10>s?"0"+s+"秒":""+s+"秒"):(l=""+a+"分",u=0===s?"":10>s?"0"+s+"秒":""+s+"秒",l+u)):(h=o+"小时",0===a?(l="",u=0===s?"":10>s?"0"+s+"秒":""+s+"秒"):(l=10>a?"0"+a+"分":""+a+"分",h+l))):(c=i+"天",h=0===o?"":10>o?"0"+o+"小时":""+o+"小时",c+h):""},t.prototype.getFormatBySecond6=function(e){var t=86400,r=3600,n=60,i=Math.floor(e/t),o=Math.floor(e%t/r),a=Math.floor((e-i*t-o*r)/n),s=Math.floor((e-i*t-o*r)%n),c=!1,h="";return i>0&&(h+=i+"天",c=!0),(c||o>0)&&(h+=o+"小时",c=!0),(c||a>0)&&(h+=a+"分",c=!0),(c||s)&&(h+=s+"秒"),h},t.prototype.getFormatBySecond7=function(e){var t=new Date(e),r=t.getFullYear(),n=t.getMonth()+1,i=t.getDate();t.getHours(),t.getMinutes(),t.getSeconds();return r+"年"+n+"月"+i+"日"},t.prototype.getFormatBySecond8=function(e){var t=86400,r=Math.floor(e/t),n="";return r>0?n=r+1+"天":(r=0,n="1天"),n},t}(BaseClass);__reflect(DateUtils.prototype,"DateUtils");var DeviceUtils=function(e){function t(){return e.call(this)||this}return __extends(t,e),Object.defineProperty(t.prototype,"IsHtml5",{get:function(){return egret.Capabilities.runtimeType===egret.RuntimeType.WEB},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"IsNative",{get:function(){return egret.Capabilities.runtimeType===egret.RuntimeType.NATIVE},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"IsMobile",{get:function(){return egret.Capabilities.isMobile},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"IsPC",{get:function(){return egret.Capabilities.isMobile},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"IsQQBrowser",{get:function(){return this.IsHtml5&&-1!==navigator.userAgent.indexOf("MQQBrowser")},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"IsIEBrowser",{get:function(){return this.IsHtml5&&-1!==navigator.userAgent.indexOf("MSIE")},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"IsFirefoxBrowser",{get:function(){return this.IsHtml5&&-1!==navigator.userAgent.indexOf("Firefox")},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"IsChromeBrowser",{get:function(){return this.IsHtml5&&-1!==navigator.userAgent.indexOf("Chrome")},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"IsSafariBrowser",{get:function(){return this.IsHtml5&&-1!==navigator.userAgent.indexOf("Safari")},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"IsOperaBrowser",{get:function(){return this.IsHtml5&&-1!=navigator.userAgent.indexOf("Opera")},enumerable:!0,configurable:!0}),t}(BaseClass);__reflect(DeviceUtils.prototype,"DeviceUtils");var LocationProperty=function(){function e(){}return e.getPara=function(e,t){if(egret.Capabilities.runtimeType==egret.RuntimeType.NATIVE)return null;var r=t||location.href;if(-1!=r.indexOf("?")){var n="&"+r.split("?")[1],i=new RegExp("&"+e+"=.*?(?:&|$)"),o=i.exec(n);if(o){var a=o[0];return a.split("&")[1].split("=")[1]}}return null},e.setProperty=function(e,t,r){var n=r||location.href;"&"+n.split("?")[1];if(-1==n.indexOf("?"))return n+="?"+e+"="+t;var i=n.split("?")[1];if(""==i)return n+=e+"="+t;var o=new RegExp("(?:^|&)"+e+"=.*?(?:&|$)"),a=o.exec(i);if(a&&""!=a[0]){var s=a[0],c=new RegExp("=.*$"),h=s.replace(c,"="+t);return n.replace(s,h)}return n+="&"+e+"="+t},e.hasProperty=function(e,t){var r=t||location.href,n="&"+r.split("?")[1];return-1!=n.indexOf("&"+e+"=")},e}();__reflect(LocationProperty.prototype,"LocationProperty");var MathUtils=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.getAngle=function(e){return 180*e/Math.PI},t.prototype.getRadian2=function(e,t,r,n){var i=r-e,o=n-t;return Math.atan2(o,i)},t.prototype.getDistance=function(e,t,r,n){var i=r-e,o=n-t,a=i*i+o*o;return Math.sqrt(a)},t.prototype.Combination=function(e,t,r,n){for(var i=new Array,o=0;e>o;++o)if(i[0]=o,!this.doCombination(e,t,o,1,i,r))return void n.execute();n.execute()},t.prototype.doCombination=function(e,t,r,n,i,o){if(n==t)return o.executeWith([i,n]),!0;for(var a=++r;e>a;++a)if(i[n]=a,!this.doCombination(e,t,a,n+1,i,o))return!1;return!0},t.prototype.cartesian=function(e,t,r){var n=new Array(e.length);this.doCartesian(e,0,n,t),r.execute()},t.prototype.doCartesian=function(e,t,r,n){for(var i=0;i<e[t];++i)if(r[t]=i,t==e.length-1)n.executeWith([r,r.length]);else if(!this.doCartesian(e,t+1,r,n))return!1;return!0},t.prototype.getNumberDigit=function(e){for(var t=1,r=Math.floor(e/10);r>0;)t++,r=Math.floor(r/10);return t},t.prototype.calNumberJieCheng=function(e){if(1>e)return 0;for(var t=1,r=1;e>=r;r++)t=Math.floor(t*r);return t},t}(BaseClass);__reflect(MathUtils.prototype,"MathUtils");var ObjectPool=function(){function e(){this._objs=new Array}return e.pop=function(t){for(var r=[],n=1;n<arguments.length;n++)r[n-1]=arguments[n];e._content[t]||(e._content[t]=[]);var i=e._content[t];if(i.length)return i.pop();var o=egret.getDefinitionByName(t),a=r.length,s=void 0;return 0==a?s=new o:1==a?s=new o(r[0]):2==a?s=new o(r[0],r[1]):3==a?s=new o(r[0],r[1],r[2]):4==a?s=new o(r[0],r[1],r[2],r[3]):5==a&&(s=new o(r[0],r[1],r[2],r[3],r[4])),s.ObjectPoolKey=t,s},e.popWithExtraKey=function(t,r){e._content[t]||(e._content[t]=[]);var n,i=e._content[t];if(i.length)for(var o=0;o<i.length;o++)if(i[o].extraKey==r){n=i[o],i.splice(o,1);break}if(!n){var a=egret.getDefinitionByName(t);n=new a(r),n.extraKey=r,n.ObjectPoolKey=t}return n},e.push=function(t){if(null==t)return!1;var r=t.ObjectPoolKey;return e._content[r]?(e._content[r].push(t),!0):!1},e.clear=function(){e._content={}},e.clearClass=function(t,r){void 0===r&&(r=null);for(var n=e._content[t];n&&n.length;){var i=n.pop();r&&i[r](),i=null}e._content[t]=null,delete e._content[t]},e.dealFunc=function(t,r){var n=e._content[t];if(null!=n){var i=0,o=n.length;for(i;o>i;i++)n[i][r]()}},e.prototype.pushObj=function(e){this._objs.push(e)},e.prototype.popObj=function(){return this._objs.length>0?this._objs.pop():null},e.prototype.clear=function(){for(;this._objs.length>0;)this._objs.pop()},e._content={},e}();__reflect(ObjectPool.prototype,"ObjectPool");var RandomUtils=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.limit=function(e,t){e=Math.min(e,t),t=Math.max(e,t);var r=t-e;return e+Math.random()*r},t.prototype.limitInteger=function(e,t){return Math.round(this.limit(e,t))},t.prototype.randPercent=function(e){var t=this.limitInteger(1,100);return e>=t?!0:!1},t.prototype.rand10000=function(e){var t=this.limitInteger(1,1e4);return e>=t?!0:!1},t.prototype.rand1000=function(e){var t=this.limitInteger(1,1e3);return e>=t?!0:!1},t.prototype.randomArray=function(e){var t=Math.floor(Math.random()*e.length);return e[t]},t.prototype.randomFrom=function(e,t){return Math.floor(Math.random()*(t-e+1)+e)},t}(BaseClass);__reflect(RandomUtils.prototype,"RandomUtils");var ResourceUtils=function(e){function t(){var t=e.call(this)||this;return t._configs=new Array,t._groups={},RES.addEventListener(RES.ResourceEvent.GROUP_COMPLETE,t.onResourceLoadComplete,t),RES.addEventListener(RES.ResourceEvent.GROUP_PROGRESS,t.onResourceProgress,t),t}return __extends(t,e),t.prototype.loadGroup=function(e,t,r,n){this._groups[e]=[t,r,n],RES.loadGroup(e)},t.prototype.loadGroups=function(e,t,r,n,i){RES.createGroup(e,t),this.loadGroup(e,r,n,i)},t.prototype.pilfererLoadGroup=function(e){RES.loadGroup("pilferer_"+e,-1)},t.prototype.addConfig=function(e,t){this._configs.push([e,t])},t.prototype.loadConfig=function(e,t){this._onConfigComplete=e,this._onConfigCompleteTarget=t,this.loadNextConfig()},t.prototype.loadNextConfig=function(){if(0==this._configs.length)return this._onConfigComplete.call(this._onConfigCompleteTarget),this._onConfigComplete=null,void(this._onConfigCompleteTarget=null);var e=this._configs.shift();RES.addEventListener(RES.ResourceEvent.CONFIG_COMPLETE,this.onConfigCompleteHandle,this),RES.loadConfig(e[0],e[1])},t.prototype.onConfigCompleteHandle=function(e){RES.removeEventListener(RES.ResourceEvent.CONFIG_COMPLETE,this.onConfigCompleteHandle,this),this.loadNextConfig()},t.prototype.onResourceLoadComplete=function(e){var t=e.groupName;if(this._groups[t]){var r=this._groups[t][0],n=this._groups[t][2];null!=r&&r.call(n),this._groups[t]=null,delete this._groups[t]}},t.prototype.onResourceProgress=function(e){var t=e.groupName;if(this._groups[t]){var r=this._groups[t][1],n=this._groups[t][2];null!=r&&r.call(n,e.itemsLoaded,e.itemsTotal)}},t}(BaseClass);__reflect(ResourceUtils.prototype,"ResourceUtils");var EuiObject=function(e){function t(){var t=e.call(this)||this;return t._hander=null,t._data=null,t.addEventListener(egret.Event.ADDED_TO_STAGE,t.onAddStage,t),t.addEventListener(egret.Event.REMOVED_FROM_STAGE,t.removeStage,t),t}return __extends(t,e),t.prototype.addHander=function(e){this._hander=e},t.prototype.onAddStage=function(e){this.removeEventListener(egret.Event.ADDED_TO_STAGE,this.onAddStage,this),this.onAdd()},t.prototype.onAdd=function(){},t.prototype.removeStage=function(){this.removeEventListener(egret.Event.REMOVED_FROM_STAGE,this.onAddStage,this),this._hander=null,this.onDestroy()},t.prototype.onDestroy=function(){},t.prototype.updataShow=function(){},t.prototype.msgDo=function(e,t){},t}(eui.Component);__reflect(EuiObject.prototype,"EuiObject");var StageUtils=function(e){function t(){return e.call(this)||this}return __extends(t,e),t.prototype.getHeight=function(){return this.getStage().stageHeight},t.prototype.getWidth=function(){return this.getStage().stageWidth},t.prototype.setTouchChildren=function(e){this.getStage().touchChildren=e},t.prototype.setTouchEnabled=function(e){this.getStage().touchEnabled=e},t.prototype.setMaxTouches=function(e){this.getStage().maxTouches=e},t.prototype.setFrameRate=function(e){this.getStage().frameRate=e},t.prototype.getStage=function(){return null},t}(BaseClass);__reflect(StageUtils.prototype,"StageUtils");var StringUtils=function(e){function t(){return e.call(this)||this}return __extends(t,e),t.prototype.trimSpace=function(e){return e.replace(/^\s*(.*?)[\s\n]*$/g,"$1")},t.prototype.getStringLength=function(e){for(var t=e.split(""),r=0,n=0,i=t;n<i.length;n++){var o=i[n];r+=this.isChinese(o)?2:1}return r},t.prototype.isChinese=function(e){var t=/^[u4E00-u9FA5]+$/;return t.test(e)?!1:!0},t.prototype.makeStrToNumer=function(e){if(e.length<2)return 0;var t=e.charAt(e.length-2),r=e.charAt(e.length-1),n=Number(t),i=Number(r);return 10*n+i},t}(BaseClass);__reflect(StringUtils.prototype,"StringUtils");var TextFlowMaker=function(e){function t(){var t=e.call(this)||this;return t.STYLE_COLOR="C",t.STYLE_SIZE="S",t.PROP_TEXT="T",t}return __extends(t,e),t.prototype.generateTextFlow=function(e){for(var t=e.split("|"),r=[],n=0,i=t.length;i>n;n++)r.push(this.getSingleTextFlow(t[n]));return r},t.prototype.getSingleTextFlow=function(e){for(var t,r=e.split("&"),n={style:{}},i=0,o=r.length;o>i;i++)t=r[i].split(":"),t[0]==this.PROP_TEXT?n.text=t[1]:t[0]==this.STYLE_SIZE?n.style.size=parseInt(t[1]):t[0]==this.STYLE_COLOR?n.style.textColor=parseInt(t[1]):n.text=t[0];return n},t}(BaseClass);__reflect(TextFlowMaker.prototype,"TextFlowMaker");var TimerHandler=function(){function e(){this.delay=0,this.repeatCount=0,this.exeTime=0,this.dealTime=0}return e.prototype.clear=function(){this.method=null,this.methodObj=null,this.complateMethod=null,this.complateMethodObj=null},e}();__reflect(TimerHandler.prototype,"TimerHandler"),window.TimerHandler=TimerHandler;var TimerManager=function(e){function t(){var t=e.call(this)||this;return t._handlers=new Array,t._delHandlers=new Array,t._currTime=egret.getTimer(),t._currFrame=0,t._count=0,t._timeScale=1,t}return __extends(t,e),t.prototype.setTimeScale=function(e){this._timeScale=e},t.prototype.doTimer=function(e,t,r,n,i,o){void 0===i&&(i=null),void 0===o&&(o=null),this.create(!1,e,t,r,n,i,o)},t.prototype.doFrame=function(e,t,r,n,i,o){void 0===i&&(i=null),void 0===o&&(o=null),this.create(!0,e,t,r,n,i,o)},Object.defineProperty(t.prototype,"count",{get:function(){return this._count},enumerable:!0,configurable:!0}),t.prototype.remove=function(e,t){for(var r=0;r<this._count;r++){var n=this._handlers[r];if(n.method==e&&n.methodObj==t){this._handlers.splice(r,1),ObjectPool.push(n),this._count--;break}}},t.prototype.removeAll=function(e){for(var t=0;t<this._count;t++){var r=this._handlers[t];r.methodObj==e&&(this._handlers.splice(t,1),ObjectPool.push(r),this._count--,t--)}},t.prototype.isExists=function(e,t){for(var r=0;r<this._count;r++){var n=this._handlers[r];if(n.method==e&&n.methodObj==t)return!0}return!1},t.prototype.onEnterFrame=function(){this._currFrame++,this._currTime=egret.getTimer();for(var e=0;e<this._count;e++){var t=this._handlers[e],r=t.userFrame?this._currFrame:this._currTime;r>=t.exeTime&&(t.method.call(t.methodObj,(this._currTime-t.dealTime)*this._timeScale),t.dealTime=this._currTime,t.exeTime+=t.delay,t.repeat||(t.repeatCount>1?t.repeatCount--:(t.complateMethod&&t.complateMethod.apply(t.complateMethodObj),this._delHandlers.push(t))))}for(;this._delHandlers.length;){var t=this._delHandlers.pop();this.remove(t.method,t.methodObj)}},t.prototype.create=function(e,t,r,n,i,o,a){if(!(0>t||0>r||null==n)){this.remove(n,i);var s=ObjectPool.pop("TimerHandler");s.userFrame=e,s.repeat=0==r,s.repeatCount=r,s.delay=t,s.method=n,s.methodObj=i,s.complateMethod=o,s.complateMethodObj=a,s.exeTime=t+(e?this._currFrame:this._currTime),s.dealTime=this._currTime,this._handlers.push(s),this._count++}},t}(BaseClass);__reflect(TimerManager.prototype,"TimerManager");var BaseDefines=function(){function e(){}return e.TKCLOUD_TYPE={TO_PAGE:"tky_topage"},e.VIEW_TYPE={SHOW_WAIT:"show_wait",HIDE_WAIT:"hide_wait"},e.FrameworkVersion="0.0.2",e}();__reflect(BaseDefines.prototype,"BaseDefines");var SoundBg=function(e){function t(){var t=e.call(this)||this;return t._currBg="",t._soundLength=0,t._soundFlag=0,t._soundTimer=null,t}return __extends(t,e),t.prototype.stop=function(){this._currSoundChannel&&this._currSoundChannel.stop(),this._currSoundChannel=null,this._currSound=null,this._currBg="",this._soundTimer&&this._soundTimer.stop()},t.prototype.play=function(e,t,r,n){if(void 0===n&&(n=null),this._volume=t,this._currBg!=e){this.stop(),this._currBg=e,this._loops=r,this._endHandler=n,this._soundTimer=new egret.Timer(1e3,0),this._soundTimer.addEventListener(egret.TimerEvent.TIMER,this.timerFunc,this),Log.trace("msg","effectName:"+e);var i=this.getSound(e);i&&this.playSound(i,r,n)}},t.prototype.continuePlay=function(){if(this._currSoundChannel){var e=this._currSoundChannel.volume,t=this._currSoundChannel.position;this._currSoundChannel.stop(),this._currSoundChannel=this._currSound.play(t,0),this._currSoundChannel.volume=e}},t.prototype.setVolume=function(e){this._volume=e,this._currSoundChannel&&(this._currSoundChannel.volume=this._volume)},t.prototype.loadedPlay=function(e){this._currBg==e&&this.playSound(RES.getRes(e),this._loops,this._endHandler)},t.prototype.checkCanClear=function(e){return this._currBg!=e},t.prototype.timerFunc=function(){this._soundFlag++,this._soundFlag>=this._soundLength&&(this._soundTimer.stop(),this._endHandler&&this._endHandler.execute())},t.prototype.playSound=function(e,t,r){e&&(this._currSound=e,this._currSoundChannel=this._currSound.play(0,t),this._currSoundChannel.volume=this._volume,this._soundLength=Math.round(this._currSound.length),this._soundFlag=0,this._soundTimer.start())},t}(BaseSound);__reflect(SoundBg.prototype,"SoundBg");var SoundEffects=function(e){function t(){return e.call(this)||this}return __extends(t,e),t.prototype.play=function(e,t){void 0===t&&(t=.5),this._volume=t;var r=this.getSound(e);r&&this.playSound(r)},t.prototype.setVolume=function(e){this._volume=e},t.prototype.loadedPlay=function(e){this.playSound(RES.getRes(e))},t.prototype.playSound=function(e){if(e){var t=e.play(0,1);t.volume=this._volume}},t}(BaseSound);__reflect(SoundEffects.prototype,"SoundEffects");var AnchorUtil=function(){function e(){}return e.init=function(){this._isInited||(this._propertyChange=Object.create(null),this._anchorChange=Object.create(null),this.injectAnchor(),this._isInited=!0)},e.setAnchorX=function(e,t){e.anchorX=t},e.setAnchorY=function(e,t){e.anchorY=t},e.setAnchor=function(e,t){e.anchorX=e.anchorY=t},e.getAnchorX=function(e){return e.anchorX||0},e.getAnchorY=function(e){return e.anchorY||0},e.injectAnchor=function(){Object.defineProperty(egret.DisplayObject.prototype,"width",{get:function(){return this.$getWidth()},set:function(t){var r=this;this.$setWidth(t),e._propertyChange[this.hashCode]=!0,egret.callLater(function(){e.changeAnchor(r)},this)},enumerable:!0,configurable:!0}),Object.defineProperty(egret.DisplayObject.prototype,"height",{get:function(){return this.$getHeight()},set:function(t){var r=this;this.$setHeight(t),e._propertyChange[this.hashCode]=!0,egret.callLater(function(){e.changeAnchor(r)},this)},enumerable:!0,configurable:!0}),Object.defineProperty(egret.DisplayObject.prototype,"anchorX",{get:function(){return this._anchorX},set:function(t){var r=this;this._anchorX=t,e._propertyChange[this.hashCode]=!0,e._anchorChange[this.hashCode]=!0,egret.callLater(function(){e.changeAnchor(r)},this)},enumerable:!0,configurable:!0}),Object.defineProperty(egret.DisplayObject.prototype,"anchorY",{get:function(){return this._anchorY},set:function(t){var r=this;this._anchorY=t,e._propertyChange[this.hashCode]=!0,e._anchorChange[this.hashCode]=!0,egret.callLater(function(){e.changeAnchor(r)},this)},enumerable:!0,configurable:!0}),Object.defineProperty(egret.DisplayObject.prototype,"anchor",{get:function(){return this._anchorX},set:function(t){var r=this;this._anchorX=t,this._anchorY=t,e._propertyChange[this.hashCode]=!0,e._anchorChange[this.hashCode]=!0,egret.callLater(function(){e.changeAnchor(r)},this)},enumerable:!0,configurable:!0}),eui&&eui.Component&&(Object.defineProperty(eui.Component.prototype,"width",{get:function(){return this._UIC_Props_._uiWidth},set:function(t){var r=this;this.$setWidth(t),e._propertyChange[this.hashCode]=!0,egret.callLater(function(){e.changeAnchor(r)},this)},enumerable:!0,configurable:!0}),Object.defineProperty(eui.Component.prototype,"height",{get:function(){return this._UIC_Props_._uiHeight},set:function(t){var r=this;this.$setHeight(t),e._propertyChange[this.hashCode]=!0,egret.callLater(function(){e.changeAnchor(r)},this)},enumerable:!0,configurable:!0}),eui.Component.prototype.setMeasuredSize=function(t,r){var n=this,i=!1;this._UIC_Props_._uiWidth!=t&&(this._UIC_Props_._uiWidth=t,i=!0),this._UIC_Props_._uiHeight!=r&&(this._UIC_Props_._uiHeight=r,i=!0),i&&(this.invalidateDisplayList(),this.dispatchResizeEvent(),e._propertyChange[this.hashCode]=!0,egret.callLater(function(){e.changeAnchor(n)},this))})},e.changeAnchor=function(t){e._propertyChange[t.hashCode]&&e._anchorChange[t.hashCode]&&(t.anchorOffsetX=t._anchorX*t.width,t.anchorOffsetY=t._anchorY*t.height,delete e._propertyChange[t.hashCode])},e}();__reflect(AnchorUtil.prototype,"AnchorUtil");var Base64;!function(e){function t(e){var t,r,n,i,o,a,s,c="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",h=function(e){for(var t="",r=0,n=0,i=0;r<e.length;)if(n=e.charCodeAt(r),128>n)t+=String.fromCharCode(n),r++;else if(n>191&&224>n)i=e.charCodeAt(r+1),t+=String.fromCharCode((31&n)<<6|63&i),r+=2;else{i=e.charCodeAt(r+1);var o=e.charCodeAt(r+2);t+=String.fromCharCode((15&n)<<12|(63&i)<<6|63&o),r+=3}return t},l="",u=0;for(e=e.replace(/[^A-Za-z0-9\+\/\=]/g,"");u<e.length;)i=c.indexOf(e.charAt(u++)),o=c.indexOf(e.charAt(u++)),a=c.indexOf(e.charAt(u++)),s=c.indexOf(e.charAt(u++)),t=i<<2|o>>4,r=(15&o)<<4|a>>2,n=(3&a)<<6|s,l+=String.fromCharCode(t),64!=a&&(l+=String.fromCharCode(r)),64!=s&&(l+=String.fromCharCode(n));return l=h(l)}function r(e){var t,r,n,i,o,a,s,c="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",h=function(e){e=e.replace(/\r\n/g,"\n");for(var t="",r=0;r<e.length;r++){var n=e.charCodeAt(r);128>n?t+=String.fromCharCode(n):n>127&&2048>n?(t+=String.fromCharCode(n>>6|192),t+=String.fromCharCode(63&n|128)):(t+=String.fromCharCode(n>>12|224),t+=String.fromCharCode(n>>6&63|128),t+=String.fromCharCode(63&n|128))}return t},l="",u=0;for(e=h(e);u<e.length;)t=e.charCodeAt(u++),r=e.charCodeAt(u++),n=e.charCodeAt(u++),i=t>>2,o=(3&t)<<4|r>>4,a=(15&r)<<2|n>>6,s=63&n,isNaN(r)?a=s=64:isNaN(n)&&(s=64),l=l+c.charAt(i)+c.charAt(o)+c.charAt(a)+c.charAt(s);return l}e.base64_Decode=t,e.base64_Encode=r}(Base64||(Base64={}));var BaseDataEvent=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t}(egret.Event);__reflect(BaseDataEvent.prototype,"BaseDataEvent");var BaseFunc=function(){function e(){}return e.objToClass=function(e,t){var r="";for(r in e)""!==r&&t.hasOwnProperty(r)&&("string"==typeof t[r]?t[r]=String(e[r]):"number"==typeof t[r]?t[r]=Number(e[r]):t[r]=e[r])},e.objToObj=function(e,t){var r="";for(r in e)t[r]=e[r]},e.ClassToClass=function(e,t){var r="";for(r in e)""!==r&&t.hasOwnProperty(r)&&("string"==typeof e[r]?t[r]=String(e[r]):"number"==typeof e[r]&&(t[r]=Number(e[r])))},e.strToObj=function(e,t,r){void 0===t&&(t=","),void 0===r&&(r=":");for(var n,i={},o=e.split(t),a=o.length,s=0;a>s;s++){var c=o[s];-1!==c.search(r)&&(n=c.split(r),n.length<2||(i[n[0]]=n[1]))}return i},e.randomInRange=function(e,t){var r=t-e;return Math.ceil(Math.random()*r+e)},e.FormatTimeMM=function(e){var t="",r=Math.floor(e/3600),n=Math.floor((e-3600*r)/60),i=Math.floor(e-60*n-3600*r);return e>0?(t=this.formatTimeString(r)+":",t+=this.formatTimeString(n)+":",t+=this.formatTimeString(i)):t="00:00:00",t},e.alignText=function(e,t){void 0===t&&(t=4),e.text.length>t?e.textAlign="left":e.textAlign="center"},e.formatTimeString=function(e){var t="";return t=10>e?"0"+String(e):String(e)},e.getHeroOcImg=function(e){var t="icon_job"+e+"_png";return t},e.formatDate=function(e,t){void 0===t&&(t=0);var r,n,i,o=new Date(1e3*parseInt(e)).toLocaleTimeString().replace("上午","").replace("下午","").replace(":","").replace(":",""),a=new Date(1e3*parseInt(e)).toLocaleTimeString().replace("上午","").replace("下午",""),s=new Date(1e3*parseInt(e)).toLocaleTimeString(),c=s.substr(0,1),h=o,l=o,u=o,p=new Date(1e3*parseInt(e)).toLocaleDateString().replace(/\//gi,"-");if("下"===c){for(var g=0;4>g;g++)h=h.substring(0,h.length-1);if(Number(h)>=1&&Number(h)<=9){l=l.substring(1);for(var f=0;3>f;f++)u=u.substring(1)}else{for(var d=0;2>d;d++)l=l.substring(1);for(var m=0;4>m;m++)u=u.substring(1)}for(var _=0;2>_;_++)l=l.substring(0,l.length-1);r=12===Number(h)?"12":12+Number(h)}else{for(var g=0;4>g;g++)h=h.substring(0,h.length-1);if(Number(h)>=0&&Number(h)<=9){l=l.substring(1);for(var f=0;3>f;f++)u=u.substring(1)}else{for(var d=0;2>d;d++)l=l.substring(1);for(var m=0;4>m;m++)u=u.substring(1)}for(var _=0;2>_;_++)l=l.substring(0,l.length-1);r=12===Number(h)?"00":Number(h)>=10&&Number(h)<=11?"0"+Number(h):Number(h)}return n=l,i=u,0===t&&(a=p+" "+r+":"+n+":"+i),1===t&&(a=p),a},e.timestampDate=function(){return Math.round((new Date).getTime()/1e3)},e.getqualitymark=function(e){var t="";switch(e){case 1:t="Ⅰ";break;case 2:t="Ⅱ";break;case 3:t="Ⅲ";break;case 4:t="Ⅳ";break;case 5:t="Ⅴ";break;case 6:t="Ⅵ"}return t},e.getqualitycolor=function(e){var t=0;switch(e){case 1:t=13500305;break;case 2:t=9500159;break;case 3:t=16748542;break;case 4:t=16751903}return t},e.getLang=function(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];
var n=e;if(t.length>0)for(var i=0,o=t.length;o>i;i++)n=n.replace("%"+(i+1),t[i]);return n},e.getLangNum=function(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];var n=e;if(t.length>0)for(var i=0,o=t.length;o>i;i++)n=n.replace("#num"+(i+1)+"#",t[i]);return n=n.replace("#test#","")},e.getLangNumWithTest=function(e,t){for(var r=[],n=2;n<arguments.length;n++)r[n-2]=arguments[n];var i=t;if(r.length>0)for(var o=0,a=r.length;a>o;o++)i=i.replace("#num"+(o+1)+"#",r[o]);return i=i.replace("#test#",e)},e.GetDay=function(e){var t=new Date,r=t.getTime()-864e5*e,n=new Date;n.setTime(r);var i=n.getFullYear(),o=n.getDate(),a=n.getMonth()+1;Number(a)<10&&(a="0"+a),Number(o)<10&&(o="0"+o);var s=String(i)+String(a)+String(o);return s},e}();__reflect(BaseFunc.prototype,"BaseFunc");var BigMath=function(){function e(){}return e.toString=function(e){return new BigNum(e).toString()},e.add=function(e,t){var r=new BigNum(e),n=new BigNum(t),i=new BigNum(0),o=this.alignExp(r,n);return 0==o?(i._n=r._n+n._n,i._e=r._e,i.toString()):-1==o?n.toString():r.toString()},e.sub=function(e,t){var r=new BigNum(e),n=new BigNum(t),i=new BigNum(0),o=this.alignExp(r,n);return 0==o?(i._n=r._n-n._n,i._e=r._e,i.toString()):-1==o?(n._n=-n._n,n.toString()):r.toString()},e.mul=function(e,t){var r=new BigNum(e),n=new BigNum(t),i=new BigNum(0);return i._n=r._n*n._n,i._e=r._e+n._e,i.toString()},e.div=function(e,t){var r=new BigNum(e),n=new BigNum(t),i=new BigNum(0);return i._n=r._n/n._n,i._e=r._e-n._e,i.toString()},e.sqrt=function(e){var t=new BigNum(e);return t._n<0?"":(t._e%2==1&&(t._n*=10,t._e--),t._n=Math.sqrt(t._n),t._e=t._e/2,t.toString())},e.pow=function(e,t){if(0>t)return"";if(0==e)return new BigNum(0).toString();if(1==e)return new BigNum(1).toString();if(0==t)return new BigNum(1).toString();var r,n,i=new BigNum(e).toString(),o="1";for(r=2*t,n=2;Math.round(r)<1||Math.round(r)<1||Math.abs(Math.round(r)/n-t)>1e-5;)r*=2,n*=2;for(r=Math.round(r);0!=r;)r%2==1&&(o=this.mul(o,i)),r=Math.floor(r/2),i=this.mul(i,i);for(;n>1;)n/=2,o=this.sqrt(o);return o},e.greater=function(e,t){var r=new BigNum(e),n=new BigNum(t);if(r._n<0){if(n._n<0){if(r._e<n._e)return!0;if(r._e==n._e&&r._n<n._n)return!0}}else if(0==r._n){if(n._n<0)return!0}else if(r._n>0){if(n._n<=0)return!0;if(r._e>n._e)return!0;if(r._e==n._e&&r._n>n._n)return!0}return!1},e.greaterOrEqual=function(e,t){return 0==this.less(e,t)},e.less=function(e,t){var r=new BigNum(e),n=new BigNum(t);if(r._n<0){if(n._n>=0)return!0;if(r._e>n._e)return!0;if(r._e==n._e&&r._n>n._n)return!0}else if(0==r._n){if(n._n>0)return!0}else if(r._n>0&&n._n>0){if(r._e<n._e)return!0;if(r._e==n._e&&r._n<n._n)return!0}return!1},e.lessOrEqual=function(e,t){return 0==this.greater(e,t)},e.equal=function(e,t){var r=new BigNum(e),n=new BigNum(t);return r._e==n._e&&r._n==n._n?!0:!1},e.min=function(e,t){var r=new BigNum(e),n=new BigNum(t);return this.less(r,n)?r.toString():n.toString()},e.max=function(e,t){var r=new BigNum(e),n=new BigNum(t);return this.greater(r,n)?r.toString():n.toString()},e.clamp=function(e,t,r){var n=new BigNum(e),i=new BigNum(t),o=new BigNum(r);return this.min(this.max(n,i),o)},e.parseNumber=function(e){var t=new BigNum(e);return t._n*Math.pow(10,t._e)},e.floor=function(e){var t=new BigNum(e);if(t._e<0)return t._n=0,t._e=0,t.toString();if(t._e>200)return t.toString();for(;Math.floor(t._n)!=t._n&&t._e>0;)t._n*=10,t._e--;return t._n=Math.floor(t._n),t.format(),t.toString()},e.alignExp=function(e,t){var r=Math.abs(e._e-t._e);if(e._e<t._e){if(r>100)return-1;t._n*=Math.pow(10,r),t._e-=r}if(e._e>t._e){if(r>100)return 1;e._n*=Math.pow(10,r),e._e-=r}return 0},e}();__reflect(BigMath.prototype,"BigMath");var BigNum=function(){function e(e){this.setNum(e)}return e.prototype.setNum=function(t){if(this._n=0,this._e=0,"string"==typeof t){t=t.replace(/exp/g,"e");var r=String(t).split("e");1==r.length?(this._n=Number(r[0]),isNaN(this._n)&&(this._n=0)):r.length>=2&&(this._n=Number(r[0]),this._e=Number(r[1]),isNaN(this._n)&&(this._n=0),isNaN(this._e)&&(this._e=0))}else"number"==typeof t?this._n=t:t instanceof e&&(this._n=t._n,this._e=t._e);this.format()},e.prototype.format=function(){if(0==this._n)return void(this._e=0);var e=!1;if(this._n<0&&(this._n=-this._n,e=!0),this._n>=10){var t=Math.floor(this.log10(this._n));this._e+=t,this._n/=Math.pow(10,t)}if(this._n<1){var r=-Math.ceil(-this.log10(this._n));this._e+=r,this._n*=Math.pow(10,-r)}e&&(this._n=-this._n)},e.prototype.log10=function(e){return 0>e?void 0:Math.log(e)*Math.LOG10E},e.prototype.toString=function(){return this.format(),this._n+"e"+this._e},e}();__reflect(BigNum.prototype,"BigNum");var EffectFly;!function(e){function t(e){}e.showTips=t}(EffectFly||(EffectFly={}));var EffectUtils;!function(e){function t(e,t,r){switch(void 0===e&&(e=""),void 0===t&&(t=1),void 0===r&&(r=!1),t){case 1:TipsUtils.showTipsDownToUp(e,r);break;case 2:TipsUtils.showTipsLeftOrRight(e,r,!0);break;case 3:TipsUtils.showTipsLeftOrRight(e,r,!1);break;case 4:TipsUtils.showTipsFromCenter(e,r);break;case 5:TipsUtils.showTipsBigToSmall(e,r);break;case 6:TipsUtils.showTipsNotice(e,r)}}function r(e,t){void 0===t&&(t=1e3),new Blink(e,t)}function n(e,t){if(void 0===t&&(t=1e3),null==this.rotationArr&&(this.rotationArr=[]),!this.rotationArr[e.hashCode]){null!=this.rotationArr[e.hashCode]&&this.rotationArr[e.hashCode]||(this.rotationArr[e.hashCode]=!0);var r=function(){this.rotationArr[e.hashCode]&&null!=e&&(e.rotation=0,egret.Tween.get(e).to({rotation:360},t).call(r,this))};e.rotation=0,egret.Tween.get(e).to({rotation:360},t).call(r,this)}}function i(e){null==this.rotationArr&&(this.rotationArr=[]),this.rotationArr[e.hashCode]=!1}function o(e){var t=80;e.x;egret.Tween.get(e).to({x:e.x-10},t)}function a(e,t){void 0===t&&(t=1);var r=e;r.x,r.y}function s(e,t,r){void 0===r&&(r=50);var n=function(){if(null!=e){var i=function(){egret.Tween.get(e).to({y:e.y+r},t/3).call(n,this)};egret.Tween.get(e).to({y:e.y-r},t).call(i,this)}};n()}function c(e,t){if(void 0===t&&(t=1),!this.isPlayEffectPlay){this.isPlayEffectPlay=!0;var r=function(){this.isPlayEffectPlay=!1},n=function(){1==t?egret.Tween.get(e).to({scaleX:1,scaleY:1,x:e.x-e.width/4,y:e.y-e.height/4},500,egret.Ease.elasticOut).call(r,this):2==t?egret.Tween.get(e).to({scaleX:1,scaleY:1,x:e.x-e.width/4,y:e.y-e.height/4},500,egret.Ease.backOut).call(r,this):3==t&&egret.Tween.get(e).to({scaleX:1,scaleY:1,x:e.x-e.width/4,y:e.y-e.height/4},100).call(r,this)};egret.Tween.get(e).to({scaleX:.5,scaleY:.5,x:e.x+e.width/4,y:e.y+e.height/4},100,egret.Ease.sineIn).call(n,this)}}function h(e){egret.Tween.removeTweens(e);var t=function(){egret.Tween.get(e).to({scaleX:1,scaleY:1,x:162,y:55},800,egret.Ease.backOut)};egret.Tween.get(e).to({scaleX:1.5,scaleY:1.5,x:e.x-e.width/4,y:e.y-e.height/4},500,egret.Ease.sineIn).call(t,this)}function l(e){var t=function(){if(null!=e){var r=function(){e.scaleX=1,e.scaleY=1,egret.Tween.get(e).to({alpha:1},1e3).call(t,self)};e.alpha=1,egret.Tween.get(e).to({scaleX:1.5,scaleY:1.5,alpha:0},1e3).call(r,self)}};t()}function u(e,t){egret.Tween.removeTweens(e),null!=t&&GameLayerManager.gameLayer().effectLayer.removeChild(t)}e.showTips=t,e.blinkEffect=r;e.rotationEffect=n,e.removeRotationEffect=i,e.shakeObj=o,e.shakeScreen=a,e.flyObj=s;e.playEffect=c,e.playCenterScale=h,e.playScaleEffect=l,e.twComplete=u}(EffectUtils||(EffectUtils={}));var GameEffcet;!function(e){function t(e,t,r){var n=new eui.Image;n.source=e+"_png",n.x=t,n.y=r;var i=function(){GameLayerManager.gameLayer().effectLayer.contains(n)&&GameLayerManager.gameLayer().effectLayer.removeChild(n)};GameLayerManager.gameLayer().effectLayer.contains(n)||GameLayerManager.gameLayer().effectLayer.addChild(n),egret.Tween.get(n).wait(1500).to({alpha:1},100).call(i,this)}function r(e,t){void 0===t&&(t=200);var r=function(){egret.Tween.get(e).to({alpha:0},t).call(n,this)},n=function(){egret.Tween.get(e).to({alpha:1},1200).call(r,this)};r()}function n(e,t){void 0===t&&(t=300);var r=function(){egret.Tween.get(e).to({scaleX:1,scaleY:1},1200)},n=function(){egret.Tween.get(e).to({scaleX:1.5,scaleY:1.5},t).call(r,this)};n()}function i(e,t){void 0===t&&(t=1200);var r=e.y,n=function(){egret.Tween.get(e).to({y:r-10},t).call(i,this)},i=function(){egret.Tween.get(e).to({y:r},t).call(n,this)};n()}function o(e,t){void 0===t&&(t=1200);var r=e.y,n=function(){egret.Tween.get(e).to({y:r-10},t).call(i,this)},i=function(){egret.Tween.get(e).to({y:r},t).call(n,this)};n()}e.onlineShow=t,e.alphaChange=r,e.bigText=n,e.UpMove=i,e.upAndDowMove=o}(GameEffcet||(GameEffcet={}));var GameMusic=function(){function e(){}return Object.defineProperty(e,"soundVolume",{set:function(e){this.soundChannel&&(this.soundChannel.volume=+e)},enumerable:!0,configurable:!0}),e.play=function(e,t,r){if(void 0===t&&(t=0),void 0===r&&(r=0),this.sound)this.soundPlaying||(this.soundChannel=this.sound.play(t,r),this.soundVolume=1,this.soundPlaying=!0);else if(RES.hasRes(e)){var n=this;RES.getResAsync(e,function(){n.sound=RES.getRes(e),n.play(e)},this)}},e.stop=function(){this.soundChannel&&this.soundChannel.stop(),this.sound=null,this.soundChannel=null,this.soundPlaying=!1},e.setVolume=function(e){this.soundChannel&&(this.soundChannel.volume=e)},e.soundPlaying=!1,e}();__reflect(GameMusic.prototype,"GameMusic");var Handler=function(){function e(e,t,r){void 0===e&&(e=null),void 0===t&&(t=null),void 0===r&&(r=null),this.thisArg=e,this.method=t,this.args=r}return e.prototype.execute=function(){null!=this.method&&this.method.apply(this.thisArg,this.args)},e.prototype.executeWith=function(e){return null==e?this.execute():void(null!=this.method&&this.method.apply(this.thisArg,this.args?this.args.concat(e):e))},e}();__reflect(Handler.prototype,"Handler"),window.Handler=Handler;var HashMap=function(){function e(){this._keys=null,this.props=null,this.clear()}return e.prototype.clear=function(){this.props=new Object,this._keys=new Array},e.prototype.containsKey=function(e){return null!=this.props[e]},e.prototype.containsValue=function(e){var t=!1,r=this.size();if(r>0)for(var n=0;r>n;n++)if(this.props[this._keys[n]]==e){t=!0;break}return t},e.prototype.getValue=function(e){return this.props[e]},e.prototype.put=function(e,t){var r=null;return this.containsKey(e)?(r=this.getValue(e),this.props[e]=t):(this.props[e]=t,this._keys.push(e)),r},e.prototype.remove=function(e){var t=null;if(this.containsKey(e)){delete this.props[e];var r=this._keys.indexOf(e);r>-1&&this._keys.splice(r,1)}return t},e.prototype.putAll=function(e){this.clear();var t=e.size();if(t>0)for(var r=e.keys(),n=0;t>n;n++)this.put(r[n],e.getValue(r[n]))},e.prototype.size=function(){return this._keys.length},e.prototype.isEmpty=function(){return this.size()<1},e.prototype.values=function(){var e=new Array,t=this.size();if(t>0)for(var r=0;t>r;r++)e.push(this.props[this._keys[r]]);return e},e.prototype.keys=function(){return this._keys},e}();__reflect(HashMap.prototype,"HashMap");var HEvent=function(e){function t(){return e.call(this)||this}return __extends(t,e),t.getInstance=function(){return t.init(),t.Instance},t.init=function(){null==t.Instance&&(t.Instance=new t)},t.Instance=null,t}(egret.EventDispatcher);__reflect(HEvent.prototype,"HEvent");var HLoad=function(e){function t(){var t=e.call(this)||this;return t.hander=null,t.time=0,t.isJson=!0,t}return __extends(t,e),t}(egret.HttpRequest);__reflect(HLoad.prototype,"HLoad");var lcp;!function(e){var t=function(e){function t(t,r,n,i){void 0===r&&(r=null),void 0===n&&(n=!1),void 0===i&&(i=!1);var o=e.call(this,t,n,i)||this;return o.CLASS_NAME="LEvent",r&&(o._obj=r),o}return __extends(t,e),t.prototype.clone=function(e){return new t(this.type,e?e:this._obj,this.bubbles,this.cancelable)},t.prototype.toString=function(){console.log(this.CLASS_NAME,"type","bubbles","cancelable")},Object.defineProperty(t.prototype,"param",{get:function(){return this._obj},enumerable:!0,configurable:!0}),t}(egret.Event);e.LEvent=t,__reflect(t.prototype,"lcp.LEvent")}(lcp||(lcp={}));var lcp;!function(e){var t=function(){function e(){this.CLASS_NAME="LListener",this.isInit=!1,this.isInit,null==this._dispatcher&&(this._dispatcher=new egret.EventDispatcher,this.isInit=!0)}return e.getInstance=function(){return null==this._instance&&(this._instance=new e),this._instance},e.prototype.addEventListener=function(e,t,r,n,i){void 0===n&&(n=!1),void 0===i&&(i=0),this._dispatcher.addEventListener(e,t,r,n,i)},e.prototype.removeEventListener=function(e,t,r,n){void 0===n&&(n=!1),this._dispatcher.removeEventListener(e,t,r,n)},e.prototype.hasEventListener=function(e){return this._dispatcher.hasEventListener(e)},e.prototype.willTrigger=function(e){return this._dispatcher.willTrigger(e)},e.prototype.dispatchEvent=function(e){return this._dispatcher.dispatchEvent(e)},e.prototype.dispatchEventWithType=function(e,t,r,n){return this._dispatcher.dispatchEventWith(e,t,r,n)},e.prototype.toString=function(){return this._dispatcher.toString()},e}();e.LListener=t,__reflect(t.prototype,"lcp.LListener")}(lcp||(lcp={}));var LN=function(){function e(){this._hash=new HashMap}return e.getInstance=function(){return null==e.instance&&(e.instance=new e),e.instance},e.prototype.playNum=function(e,t,r){void 0===r&&(r=1e3);var n=this._hash.getValue(e);null==n?(n=new MoveNum,this._hash.put(e,n),n.play(e,t,r)):(n.stop(),n.play(e,t,r))},e.prototype.deleteMoveNum=function(e){this._hash.remove(e._label),e=null},e.prototype.addPicNum=function(e,t,r){void 0===r&&(r=!1);for(var n=String(t),i=0;i<n.length;i++){var o=n.charAt(i),a=new eui.Image,s="font_num"+o+"_png";r&&(s="font_numh"+o+"_png"),a.source=RES.getRes(s),a.x=20*i,e.addChild(a)}},e.prototype.getMovieClip=function(e,t){for(var r=new Array,n=0;t>n;n++){var i=e+"_"+n+"_json";r.push(i)}var o=e+"_json",a=new zmovie.ZMovieClip(r,RES.getRes(o));return a},e.prototype.playZmoveLoop=function(e,t,r,n,i){void 0===i&&(i=1);var o=this.getMovieClip(e,t);return o.x=r,o.y=n,o.isLoop=!0,o.scaleX=i,o.scaleY=i,GameLayerManager.gameLayer().effectLayer.addChild(o),o.gotoAndPlayLabel("1"),o},e.prototype.stopZmove=function(e){GameLayerManager.gameLayer().effectLayer.contains(e)&&GameLayerManager.gameLayer().effectLayer.removeChild(e),e.stop(),e=null},e.prototype.playZmove=function(e,t,r,n,i,o,a){void 0===i&&(i=null),void 0===o&&(o=1),void 0===a&&(a="1");var s=this.getMovieClip(e,t);s.endHander=i,s.x=r,s.y=n,s.isLoop=!1,s.scaleX=o,s.scaleY=o,GameLayerManager.gameLayer().effectLayer.addChild(s),s.addEventListener(zmovie.ZMovieClip.EVENT_FRAME_COMPLETE,this.endZmove,this),s.gotoAndPlayLabel(a)},e.prototype.flyText=function(e,t,r){void 0===t&&(t=null),void 0===r&&(r=null)},e.prototype.getHeroAddInfoArray=function(e,t,r,n,i){var o="<font color='#9bff37'> 攻击 + "+t+"< /font>";0>t&&(o="<font color='#ca2600'> 攻击 - "+Math.abs(t)+"< /font>");var a="<font color='#9bff37'> 生命 + "+r+"< /font>";0>r&&(a="<font color='#ca2600'> 生命 - "+Math.abs(r)+"< /font>");var s="<font color='#9bff37'> 物防 + "+n+"< /font>";0>n&&(s="<font color='#ca2600'> 物防 - "+Math.abs(n)+"< /font>");var c="<font color='#9bff37'> 法防 + "+i+"< /font>";0>i&&(c="<font color='#ca2600'> 法防 - "+Math.abs(i)+"< /font>"),0!=t&&e.push(o),0!=r&&e.push(a),0!=n&&e.push(s),0!=i&&e.push(c)},e.prototype.endZmove=function(e){var t=e.target;t.stop(),t.removeEventListener(zmovie.ZMovieClip.EVENT_FRAME_COMPLETE,this.endZmove,this),GameLayerManager.gameLayer().effectLayer.contains(t)&&GameLayerManager.gameLayer().effectLayer.removeChild(t),t.endHander&&t.endHander.execute(),t=null},e.prototype.hSize=function(e){var t=e.target;t.removeEventListener(egret.Event.RESIZE,this.hSize,this),t.anchorOffsetX=.5*t.width,t.anchorOffsetY=.5*t.height,t.scaleX=0,t.scaleY=0,egret.Tween.get(t).to({scaleX:1.2,scaleY:1.2},500).call(this.flyOne,this,[t])},e.prototype.flyOne=function(e){egret.Tween.get(e).to({scaleX:1,scaleY:1},200).call(this.flyTwo,this,[e])},e.prototype.flyTwo=function(e){if("0"==e.name)egret.Tween.get(e).wait(1e3).to({y:e.y-200,alpha:0},1e3).call(this.flyEnd,this,[e]);else{var t=e.name,r=t.split("#");egret.Tween.get(e).wait(1e3).to({x:Number(r[0]),y:Number(r[1]),scaleX:0,scaleY:0},500).call(this.flyEnd,this,[e])}},e.prototype.flyEnd=function(e){GameLayerManager.gameLayer().effectLayer.contains(e)&&GameLayerManager.gameLayer().effectLayer.removeChild(e)},e}();__reflect(LN.prototype,"LN");var Log=function(){function e(){}return e.trace=function(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];GM.debugKey.containsKey(e)||GM.isDebug&&(t[0]="["+e+"][DebugLog]"+t[0],console.log.apply(console,t))},e}();__reflect(Log.prototype,"Log");var MD5=function(){function e(){this.hexcase=0,this.b64pad=""}return e.prototype.hex_md5=function(e){return this.rstr2hex(this.rstr_md5(this.str2rstr_utf8(e)))},e.prototype.b64_md5=function(e){return this.rstr2b64(this.rstr_md5(this.str2rstr_utf8(e)))},e.prototype.any_md5=function(e,t){return this.rstr2any(this.rstr_md5(this.str2rstr_utf8(e)),t)},e.prototype.hex_hmac_md5=function(e,t){return this.rstr2hex(this.rstr_hmac_md5(this.str2rstr_utf8(e),this.str2rstr_utf8(t)))},e.prototype.b64_hmac_md5=function(e,t){return this.rstr2b64(this.rstr_hmac_md5(this.str2rstr_utf8(e),this.str2rstr_utf8(t)))},e.prototype.any_hmac_md5=function(e,t,r){return this.rstr2any(this.rstr_hmac_md5(this.str2rstr_utf8(e),this.str2rstr_utf8(t)),r)},e.prototype.md5_vm_test=function(){return"900150983cd24fb0d6963f7d28e17f72"==this.hex_md5("abc").toLowerCase()},e.prototype.rstr_md5=function(e){return this.binl2rstr(this.binl_md5(this.rstr2binl(e),8*e.length))},e.prototype.rstr_hmac_md5=function(e,t){var r=this.rstr2binl(e);r.length>16&&(r=this.binl_md5(r,8*e.length));for(var n=Array(16),i=Array(16),o=0;16>o;o++)n[o]=909522486^r[o],i[o]=1549556828^r[o];var a=this.binl_md5(n.concat(this.rstr2binl(t)),512+8*t.length);return this.binl2rstr(this.binl_md5(i.concat(a),640))},e.prototype.rstr2hex=function(e){try{this.hexcase}catch(t){this.hexcase=0}for(var r,n=this.hexcase?"0123456789ABCDEF":"0123456789abcdef",i="",o=0;o<e.length;o++)r=e.charCodeAt(o),i+=n.charAt(r>>>4&15)+n.charAt(15&r);return i},e.prototype.rstr2b64=function(e){try{this.b64pad}catch(t){this.b64pad=""}for(var r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",n="",i=e.length,o=0;i>o;o+=3)for(var a=e.charCodeAt(o)<<16|(i>o+1?e.charCodeAt(o+1)<<8:0)|(i>o+2?e.charCodeAt(o+2):0),s=0;4>s;s++)n+=8*o+6*s>8*e.length?this.b64pad:r.charAt(a>>>6*(3-s)&63);return n},e.prototype.rstr2any=function(e,t){var r,n,i,o,a,s=t.length,c=Array(Math.ceil(e.length/2));for(r=0;r<c.length;r++)c[r]=e.charCodeAt(2*r)<<8|e.charCodeAt(2*r+1);var h=Math.ceil(8*e.length/(Math.log(t.length)/Math.log(2))),l=Array(h);for(n=0;h>n;n++){for(a=Array(),o=0,r=0;r<c.length;r++)o=(o<<16)+c[r],i=Math.floor(o/s),o-=i*s,(a.length>0||i>0)&&(a[a.length]=i);l[n]=o,c=a}var u="";for(r=l.length-1;r>=0;r--)u+=t.charAt(l[r]);return u},e.prototype.str2rstr_utf8=function(e){for(var t,r,n="",i=-1;++i<e.length;)t=e.charCodeAt(i),r=i+1<e.length?e.charCodeAt(i+1):0,t>=55296&&56319>=t&&r>=56320&&57343>=r&&(t=65536+((1023&t)<<10)+(1023&r),i++),127>=t?n+=String.fromCharCode(t):2047>=t?n+=String.fromCharCode(192|t>>>6&31,128|63&t):65535>=t?n+=String.fromCharCode(224|t>>>12&15,128|t>>>6&63,128|63&t):2097151>=t&&(n+=String.fromCharCode(240|t>>>18&7,128|t>>>12&63,128|t>>>6&63,128|63&t));return n},e.prototype.str2rstr_utf16le=function(e){for(var t="",r=0;r<e.length;r++)t+=String.fromCharCode(255&e.charCodeAt(r),e.charCodeAt(r)>>>8&255);return t},e.prototype.str2rstr_utf16be=function(e){for(var t="",r=0;r<e.length;r++)t+=String.fromCharCode(e.charCodeAt(r)>>>8&255,255&e.charCodeAt(r));return t},e.prototype.rstr2binl=function(e){for(var t=Array(e.length>>2),r=0;r<t.length;r++)t[r]=0;for(var r=0;r<8*e.length;r+=8)t[r>>5]|=(255&e.charCodeAt(r/8))<<r%32;return t},e.prototype.binl2rstr=function(e){for(var t="",r=0;r<32*e.length;r+=8)t+=String.fromCharCode(e[r>>5]>>>r%32&255);return t},e.prototype.binl_md5=function(e,t){e[t>>5]|=128<<t%32,e[(t+64>>>9<<4)+14]=t;for(var r=1732584193,n=-271733879,i=-1732584194,o=271733878,a=0;a<e.length;a+=16){var s=r,c=n,h=i,l=o;r=this.md5_ff(r,n,i,o,e[a+0],7,-680876936),o=this.md5_ff(o,r,n,i,e[a+1],12,-389564586),i=this.md5_ff(i,o,r,n,e[a+2],17,606105819),n=this.md5_ff(n,i,o,r,e[a+3],22,-1044525330),r=this.md5_ff(r,n,i,o,e[a+4],7,-176418897),o=this.md5_ff(o,r,n,i,e[a+5],12,1200080426),i=this.md5_ff(i,o,r,n,e[a+6],17,-1473231341),n=this.md5_ff(n,i,o,r,e[a+7],22,-45705983),r=this.md5_ff(r,n,i,o,e[a+8],7,1770035416),o=this.md5_ff(o,r,n,i,e[a+9],12,-1958414417),i=this.md5_ff(i,o,r,n,e[a+10],17,-42063),n=this.md5_ff(n,i,o,r,e[a+11],22,-1990404162),r=this.md5_ff(r,n,i,o,e[a+12],7,1804603682),o=this.md5_ff(o,r,n,i,e[a+13],12,-40341101),i=this.md5_ff(i,o,r,n,e[a+14],17,-1502002290),n=this.md5_ff(n,i,o,r,e[a+15],22,1236535329),r=this.md5_gg(r,n,i,o,e[a+1],5,-165796510),o=this.md5_gg(o,r,n,i,e[a+6],9,-1069501632),i=this.md5_gg(i,o,r,n,e[a+11],14,643717713),n=this.md5_gg(n,i,o,r,e[a+0],20,-373897302),r=this.md5_gg(r,n,i,o,e[a+5],5,-701558691),o=this.md5_gg(o,r,n,i,e[a+10],9,38016083),i=this.md5_gg(i,o,r,n,e[a+15],14,-660478335),n=this.md5_gg(n,i,o,r,e[a+4],20,-405537848),r=this.md5_gg(r,n,i,o,e[a+9],5,568446438),o=this.md5_gg(o,r,n,i,e[a+14],9,-1019803690),i=this.md5_gg(i,o,r,n,e[a+3],14,-187363961),n=this.md5_gg(n,i,o,r,e[a+8],20,1163531501),r=this.md5_gg(r,n,i,o,e[a+13],5,-1444681467),o=this.md5_gg(o,r,n,i,e[a+2],9,-51403784),i=this.md5_gg(i,o,r,n,e[a+7],14,1735328473),n=this.md5_gg(n,i,o,r,e[a+12],20,-1926607734),r=this.md5_hh(r,n,i,o,e[a+5],4,-378558),o=this.md5_hh(o,r,n,i,e[a+8],11,-2022574463),i=this.md5_hh(i,o,r,n,e[a+11],16,1839030562),n=this.md5_hh(n,i,o,r,e[a+14],23,-35309556),r=this.md5_hh(r,n,i,o,e[a+1],4,-1530992060),o=this.md5_hh(o,r,n,i,e[a+4],11,1272893353),i=this.md5_hh(i,o,r,n,e[a+7],16,-155497632),n=this.md5_hh(n,i,o,r,e[a+10],23,-1094730640),r=this.md5_hh(r,n,i,o,e[a+13],4,681279174),o=this.md5_hh(o,r,n,i,e[a+0],11,-358537222),i=this.md5_hh(i,o,r,n,e[a+3],16,-722521979),n=this.md5_hh(n,i,o,r,e[a+6],23,76029189),r=this.md5_hh(r,n,i,o,e[a+9],4,-640364487),o=this.md5_hh(o,r,n,i,e[a+12],11,-421815835),i=this.md5_hh(i,o,r,n,e[a+15],16,530742520),n=this.md5_hh(n,i,o,r,e[a+2],23,-995338651),r=this.md5_ii(r,n,i,o,e[a+0],6,-198630844),o=this.md5_ii(o,r,n,i,e[a+7],10,1126891415),i=this.md5_ii(i,o,r,n,e[a+14],15,-1416354905),n=this.md5_ii(n,i,o,r,e[a+5],21,-57434055),r=this.md5_ii(r,n,i,o,e[a+12],6,1700485571),o=this.md5_ii(o,r,n,i,e[a+3],10,-1894986606),i=this.md5_ii(i,o,r,n,e[a+10],15,-1051523),n=this.md5_ii(n,i,o,r,e[a+1],21,-2054922799),r=this.md5_ii(r,n,i,o,e[a+8],6,1873313359),o=this.md5_ii(o,r,n,i,e[a+15],10,-30611744),i=this.md5_ii(i,o,r,n,e[a+6],15,-1560198380),n=this.md5_ii(n,i,o,r,e[a+13],21,1309151649),r=this.md5_ii(r,n,i,o,e[a+4],6,-145523070),o=this.md5_ii(o,r,n,i,e[a+11],10,-1120210379),i=this.md5_ii(i,o,r,n,e[a+2],15,718787259),n=this.md5_ii(n,i,o,r,e[a+9],21,-343485551),r=this.safe_add(r,s),n=this.safe_add(n,c),i=this.safe_add(i,h),o=this.safe_add(o,l)}return[r,n,i,o]},e.prototype.md5_cmn=function(e,t,r,n,i,o){return this.safe_add(this.bit_rol(this.safe_add(this.safe_add(t,e),this.safe_add(n,o)),i),r)},e.prototype.md5_ff=function(e,t,r,n,i,o,a){return this.md5_cmn(t&r|~t&n,e,t,i,o,a)},e.prototype.md5_gg=function(e,t,r,n,i,o,a){return this.md5_cmn(t&n|r&~n,e,t,i,o,a)},e.prototype.md5_hh=function(e,t,r,n,i,o,a){return this.md5_cmn(t^r^n,e,t,i,o,a)},e.prototype.md5_ii=function(e,t,r,n,i,o,a){return this.md5_cmn(r^(t|~n),e,t,i,o,a)},e.prototype.safe_add=function(e,t){var r=(65535&e)+(65535&t),n=(e>>16)+(t>>16)+(r>>16);return n<<16|65535&r},e.prototype.bit_rol=function(e,t){return e<<t|e>>>32-t},e}();__reflect(MD5.prototype,"MD5");var MoveNum=function(){function e(){this._oldValue=0,this._cValue=0,this._bAdd=!1,this._ctime=0,this._endTime=0,this._label=null,this._addVelue=0}return e.prototype.play=function(e,t,r){this._label=e,this._cValue=t,this._endTime=r,this._oldValue=Number(this._label.text),this._bAdd=!0,this._cValue<this._oldValue?(this._bAdd=!1,this._addVelue=this._oldValue-this._cValue):this._addVelue=this._cValue-this._oldValue,this._ctime=egret.getTimer()},e.prototype.stop=function(){this._label.text=String(this._cValue)},e.prototype.onEnterFrame=function(e){var t=egret.getTimer();t-=this._ctime,t>this._endTime&&(t=this._endTime);var r=Math.ceil(t*this._addVelue/this._endTime);this._bAdd?this._label.text=String(this._oldValue+r):this._label.text=String(this._oldValue-r),t==this._endTime&&LN.getInstance().deleteMoveNum(this)},e}();__reflect(MoveNum.prototype,"MoveNum");var MsgType;!function(e){var t;!function(e){e[e.SV_LOGIN=2e3]="SV_LOGIN",e[e.PLAYER_HEART_INFO=2101]="PLAYER_HEART_INFO",e[e.SV_ADD_BLOCK=3001]="SV_ADD_BLOCK",e[e.SV_CHAT=3e3]="SV_CHAT",e[e.SV_DEL_ONECHAT=3002]="SV_DEL_ONECHAT",e[e.SV_DEL_BLOCK=3003]="SV_DEL_BLOCK",e[e.MSG_END=3004]="MSG_END"}(t=e.MSG||(e.MSG={}))}(MsgType||(MsgType={}));var SlideLine=function(e){function t(){return e.call(this)||this}return __extends(t,e),t.prototype.drawPoint=function(e,t){var r=this;this.alpha=1;var n=.5*(e.x+t.x),i=.5*(e.y+t.y);this.graphics.clear(),this.graphics.beginFill(16777215,1),this.graphics.moveTo(e.x,e.y),this.graphics.lineTo(n,i-5),this.graphics.lineTo(t.x,t.y),this.graphics.lineTo(n,i+5),this.graphics.lineTo(e.x,e.y),this.graphics.endFill(),GameLayerManager.gameLayer().effectLayer.addChild(this),egret.Tween.get(this).to({alpha:0},800).call(function(){SlideLineManager.getInstance().backLine(r),GameLayerManager.gameLayer().effectLayer.contains(r)&&GameLayerManager.gameLayer().effectLayer.removeChild(r)},this)},t}(egret.Sprite);__reflect(SlideLine.prototype,"SlideLine");var SlideLineManager=function(){function e(){this._slideLines=[],this._recordPoint=null}return e.getInstance=function(){return null==e.instance&&(e.instance=new e),e.instance},e.prototype.drawPoint=function(e,t){if(null==this._recordPoint)this._recordPoint=new egret.Point(e,t);else{var r=App.MathUtils.getDistance(this._recordPoint.x,this._recordPoint.y,e,t);if(r>50)if(this._slideLines.length>0)this._slideLines.pop();else{var n=new SlideLine,i=new egret.Point(e,t);n.drawPoint(this._recordPoint,i),this._recordPoint=i}}},e.prototype.backLine=function(e){this._slideLines.push(e)},e.prototype.endDraw=function(){this._recordPoint=null},e}();__reflect(SlideLineManager.prototype,"SlideLineManager");var MyUtil;!function(e){var t=function(){function e(){}return e.stringToUint=function(e){for(var t=new Uint8Array(e.length),r=0,n=e.length;n>r;++r)t[r]=e.charCodeAt(r);return t},e.uint8Tostring=function(e){var t=String.fromCharCode.apply(null,e),r=decodeURIComponent(t);return r},e.strToUTF8=function(e){if("string"!=typeof e)throw new TypeError("toUTF8 function only accept a string as its parameter.");for(var t,r,n,i=[],o=0,a=0,s=e.length;s>a;a++){if(o=e.charCodeAt(a),o>65535)throw new Error("InvalidCharacterError");o>128?2047>o?(t=String.fromCharCode(o>>>6|192),r=String.fromCharCode(63&o|128),i.push(t,r)):(t=String.fromCharCode(o>>>12|224),r=String.fromCharCode(o>>>6&63|128),n=String.fromCharCode(63&o|128),i.push(t,r,n)):i.push(e[a])}return i.join("")},e}();e.ST=t,__reflect(t.prototype,"MyUtil.ST")}(MyUtil||(MyUtil={}));var UnitUtil=function(){function e(){this._tag=["K","M","B","t","q","Q","s","S","o","n","d","U","D","T","Qt","Qd","Sd","St","O","N","v","c"],this._low=["a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z"],this._cap=["A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"],this.unitKey=this._tag.slice(0),this.comArray(this._tag,this._low),this.comArray(this._tag,this._cap),this._r=[];for(var e=this.unitKey.length,t=0;e>t;t++)this._r.push(3*(t+1))}return e.getInstance=function(){return null==e.instance&&(e.instance=new e),e.instance},e.prototype.easyNumberCeil=function(e){if(!e&&0!=e)return"-";var t=new BigNum(e);if(t._e<3){var r=t._n*Math.pow(10,t._e);return Math.ceil(r).toString()}for(var n=this.unitKey.length,i=0;n>i;i++){var o=t._e-this._r[i];if(3>o){var r=t._n*Math.pow(10,o);return 0==o?(r=Math.floor(100*r)/100,r+this.unitKey[i]):1==o?(r=Math.floor(10*r)/10,parseFloat(r.toFixed(1))+this.unitKey[i]):(r=Math.floor(r),parseFloat(r.toFixed(0))+this.unitKey[i])}}return t.toString()+this.unitKey[this.unitKey.length-1]},e.prototype.easyNumber=function(e){if(e||0==e){var t=new BigNum(e);if(t._e<3){var r=t._n*Math.pow(10,t._e);return Math.round(r).toString()}for(var n=this.unitKey.length,i=0;n>i;i++){var o=t._e-this._r[i];if(3>o){var r=t._n*Math.pow(10,o);return 0==o?(r=Math.floor(100*r)/100,r+this.unitKey[i]):1==o?(r=Math.floor(10*r)/10,parseFloat(r.toFixed(1))+this.unitKey[i]):(r=Math.floor(r),parseFloat(r.toFixed(0))+this.unitKey[i])}}}},e.prototype.getUnitLevel=function(e){if(!e&&0!=e)return"-";var t=new BigNum(e);if(t._e<3)return"";for(var r=0;r<this.unitKey.length;r++){var n=t._e-this._r[r];if(3>n)return this.unitKey[r]}},e.prototype.comArray=function(e,t){for(var r=e.length,n=0;r>n;n++)for(var i=e[n],o=0,a=t;o<a.length;o++){var s=a[o];this.unitKey.push(i+s)}},e}();__reflect(UnitUtil.prototype,"UnitUtil");var VideoTools=function(){function e(){this.referenceVideoJs()}return e.prototype.referenceVideoJs=function(){var e=document.createElement("script");e.src="./video-js/video.min.js",document.body.appendChild(e);var t=document.createElement("script");t.src="./video-js/videojs-contrib-hls.min.js",document.body.appendChild(t);var r=document.createElement("link");r.href="./video-js/video-js.min.css",r.rel="stylesheet",document.body.appendChild(r);var n=document.createElement("link");n.href="./video-js/VideoStyle.css",n.rel="stylesheet",document.body.appendChild(n)},e.prototype.videoTools_playM3u8=function(e,t,r,n,i){void 0===i&&(i=!1);var o=document.createElement("video");o.id=e,o.setAttribute("class","video-js vjs-default-skin vjs-big-play-centered"),o.setAttribute("controls",""),i&&o.setAttribute("autoplay",""),o.preload="auto",o.setAttribute("data-setup","{}"),o.width=t,o.height=r;var a=document.createElement("source");a.src=n,a.type="application/x-mpegURL",o.appendChild(a),document.body.appendChild(o)},e.prototype.deleteVideoLab=function(e){var t=document.getElementById(e);document.body.removeChild(t)},Object.defineProperty(e,"instance",{get:function(){return e._instance||(e._instance=new e),e._instance},enumerable:!0,configurable:!0}),e}();__reflect(VideoTools.prototype,"VideoTools");var Blink=function(e){function t(t,r,n){void 0===n&&(n=!0);var i=e.call(this)||this;return i._target=t,i._time=r,n&&i.start(),i}return __extends(t,e),t.prototype.start=function(){this._currTime=egret.getTimer(),this._target.addEventListener(egret.Event.ENTER_FRAME,this.runDown,this)},t.prototype.runDown=function(e){this._target.alpha-=.045,this.checkOver()||this._target.alpha<=.6&&(this._target.removeEventListener(egret.Event.ENTER_FRAME,this.runDown,this),this._target.addEventListener(egret.Event.ENTER_FRAME,this.runUp,this))},t.prototype.runUp=function(e){this._target.alpha+=.045,this.checkOver()||this._target.alpha>=1&&(this._target.removeEventListener(egret.Event.ENTER_FRAME,this.runUp,this),this._target.addEventListener(egret.Event.ENTER_FRAME,this.runDown,this))},t.prototype.checkOver=function(){var e=egret.getTimer();return e-this._currTime>=this._time?(this.destroy(),!0):!1},t.prototype.destroy=function(){this._target.alpha=1,this._target.removeEventListener(egret.Event.ENTER_FRAME,this.runDown,this),this._target.removeEventListener(egret.Event.ENTER_FRAME,this.runUp,this),this.dispatchEventWith(egret.Event.COMPLETE,!1,this._target),this._target=null},t}(egret.EventDispatcher);__reflect(Blink.prototype,"Blink");var TipsUtils;!function(e){function t(e,t){void 0===e&&(e=""),void 0===t&&(t=!1);var r=GM.gamec.curWidth(),n=GM.gamec.curHeight(),i=new egret.TextField;i.size=24,i.y=.4*n,t?i.textColor=GM.gamec.TEXT_COLORS.red:i.textColor=GM.gamec.TEXT_COLORS.green,i.alpha=0,i.textFlow=(new egret.HtmlTextParser).parser(e),i.fontFamily="黑体",i.strokeColor=0,i.x=r/2-i.width/2,i.stroke=2,i.bold=!0,i.textAlign=egret.HorizontalAlign.CENTER,GameLayerManager.gameLayer().effectLayer.contains(i)||GameLayerManager.gameLayer().effectLayer.addChild(i);
var o=function(){GameLayerManager.gameLayer().effectLayer.contains(i)&&(GameLayerManager.gameLayer().effectLayer.removeChild(i),i=null)},a=function(){egret.Tween.get(i).to({alpha:0},2e3).call(o,this)};i.visible=!0,egret.Tween.get(i).to({y:i.y-120,alpha:1},800,egret.Ease.backOut).call(a,this)}function r(e,t,r){void 0===e&&(e=""),void 0===t&&(t=!1),void 0===r&&(r=!0);var n=GM.gamec.curHeight(),i=GM.gamec.curWidth(),o=new egret.TextField;o.size=24,o.y=.5*i,t?o.textColor=GM.gamec.TEXT_COLORS.red:o.textColor=GM.gamec.TEXT_COLORS.green,o.alpha=0,o.textFlow=(new egret.HtmlTextParser).parser(e),o.fontFamily="黑体",o.strokeColor=0,r?o.x=-o.width:o.x=n,o.stroke=2,o.bold=!0,o.textAlign=egret.HorizontalAlign.CENTER,GameLayerManager.gameLayer().effectLayer.contains(o)||GameLayerManager.gameLayer().effectLayer.addChild(o),r?egret.Tween.get(o).to({x:n/2-o.width/2-50,alpha:1},300,egret.Ease.sineInOut):egret.Tween.get(o).to({x:i/2-o.width/2+50,alpha:1},300,egret.Ease.sineInOut),egret.setTimeout(function(){r?egret.Tween.get(o).to({x:o.x+100},500):egret.Tween.get(o).to({x:o.x-100},500)},this,300),egret.setTimeout(function(){r?egret.Tween.get(o).to({x:n},300,egret.Ease.sineIn):egret.Tween.get(o).to({x:-o.width},300,egret.Ease.sineIn)},this,800),egret.setTimeout(function(){GameLayerManager.gameLayer().effectLayer.contains(o)&&(GameLayerManager.gameLayer().effectLayer.removeChild(o),o=null)},this,1100)}function n(e,t){void 0===e&&(e=""),void 0===t&&(t=!1);var r=GM.gamec.curHeight(),n=GM.gamec.curWidth(),i=new egret.TextField;i.size=24,i.y=n/2,t?i.textColor=GM.gamec.TEXT_COLORS.red:i.textColor=GM.gamec.TEXT_COLORS.green,i.alpha=0,i.textFlow=(new egret.HtmlTextParser).parser(e),i.fontFamily="黑体",i.strokeColor=0,i.x=r/2,i.stroke=2,i.bold=!0,i.textAlign=egret.HorizontalAlign.CENTER,AnchorUtil.setAnchorX(i,.5),AnchorUtil.setAnchorY(i,.5),i.scaleX=0,i.scaleY=0,GameLayerManager.gameLayer().effectLayer.contains(i)||GameLayerManager.gameLayer().effectLayer.addChild(i);var o=function(){GameLayerManager.gameLayer().effectLayer.contains(i)&&(GameLayerManager.gameLayer().effectLayer.removeChild(i),i=null)};egret.Tween.get(i).to({scaleX:1,scaleY:1,alpha:1},200),egret.setTimeout(function(){egret.Tween.get(i).to({alpha:0},500).call(o,this)},this,1e3)}function i(e,t){void 0===e&&(e=""),void 0===t&&(t=!1);var r=new egret.TextField,n=GM.gamec.curHeight(),i=GM.gamec.curWidth();r.size=24,r.y=i/2,t?r.textColor=GM.gamec.TEXT_COLORS.red:r.textColor=GM.gamec.TEXT_COLORS.green,r.alpha=0,r.textFlow=(new egret.HtmlTextParser).parser(e),r.fontFamily="黑体",r.strokeColor=0,r.x=n/2,r.stroke=2,r.bold=!0,r.textAlign=egret.HorizontalAlign.CENTER,AnchorUtil.setAnchorX(r,.5),AnchorUtil.setAnchorY(r,.5),r.scaleX=4,r.scaleY=4,GameLayerManager.gameLayer().effectLayer.contains(r)||GameLayerManager.gameLayer().effectLayer.addChild(r);var o=function(){GameLayerManager.gameLayer().effectLayer.contains(r)&&(GameLayerManager.gameLayer().effectLayer.removeChild(r),r=null)};egret.Tween.get(r).to({scaleX:1,scaleY:1,alpha:1},200),egret.setTimeout(function(){egret.Tween.get(r).to({alpha:0},500).call(o,this)},this,1e3)}function o(e,t){void 0===e&&(e=""),void 0===t&&(t=!1);var r=new egret.Sprite,n=new egret.TextField,i=GM.gamec.curHeight(),o=GM.gamec.curWidth();n.size=24,n.y=.2*o,t?n.textColor=GM.gamec.TEXT_COLORS.red:n.textColor=GM.gamec.TEXT_COLORS.green,n.textFlow=(new egret.HtmlTextParser).parser(e),n.fontFamily="黑体",n.strokeColor=0,n.x=i,n.stroke=2,n.bold=!0,n.textAlign=egret.HorizontalAlign.CENTER,GameLayerManager.gameLayer().effectLayer.contains(n)||(r.graphics.beginFill(0,.4),r.graphics.drawRect(0,.2*o-7,960,40),r.graphics.endFill(),GameLayerManager.gameLayer().effectLayer.addChild(r),GameLayerManager.gameLayer().effectLayer.addChild(n)),egret.Tween.get(n).to({x:-n.width},1e4),egret.setTimeout(function(){GameLayerManager.gameLayer().effectLayer.contains(n)&&(r.graphics.clear(),GameLayerManager.gameLayer().effectLayer.removeChild(n),GameLayerManager.gameLayer().effectLayer.removeChild(r),n=null)},this,1e4)}e.showTipsDownToUp=t,e.showTipsLeftOrRight=r,e.showTipsFromCenter=n,e.showTipsBigToSmall=i,e.showTipsNotice=o}(TipsUtils||(TipsUtils={}));var zmovie;!function(e){var t=function(t){function r(e,r,n){var i=t.call(this)||this;return i.setObject(e,r,n),i}return __extends(r,t),r.prototype.setObject=function(t,r,n){if(this.libObj!=r||this.libName!=n){this.libName=n,this.libObj=r,e.Util.clearDisposeDisplay(this);for(var i=e.Util.getTextureArrByName(t,r,n),o=i.length,a=o-1;a>=0;a--){var s=i[a],c=new egret.Bitmap;c.touchEnabled=!1,c.texture=s.t,c.x=s.x/r.scale,c.y=s.y/r.scale,this.addChild(c)}}},r}(egret.DisplayObjectContainer);e.LargeImage=t,__reflect(t.prototype,"zmovie.LargeImage")}(zmovie||(zmovie={}));var zmovie;!function(e){var t=function(){function e(){}return e.clearDisposeDisplay=function(e){try{for(var t=void 0,r=e.numChildren-1;r>=0;r--)t=e.getChildAt(r),e.removeChild(t)}catch(n){}},e.getTextureArrByName=function(t,r,n){var i=[],o=e.getTextureByName(t,n);if(null==o){var a=r.clipping[n];if(null!=a)for(var s=a.length-1;s>=0;s--){if(o=e.getTextureByName(t,a[s].name),null==o)return i;i.push({t:o,x:a[s].x,y:a[s].y})}return i}return i.push({t:o,x:0,y:0}),i},e.getTextureByName=function(e,t){var r=null;try{r=RES.getRes(e+"."+t)}catch(n){}try{if(null==r)for(var i=e,o=i.length-1;o>=0;o--){var a=RES.getRes(i[o]+"."+t);if(null!=a)return a}}catch(n){}return r},e}();e.Util=t,__reflect(t.prototype,"zmovie.Util")}(zmovie||(zmovie={}));var zmovie;!function(e){var t=function(){function e(){}return e}();e.ZAssetManager=t,__reflect(t.prototype,"zmovie.ZAssetManager")}(zmovie||(zmovie={}));var zmovie;!function(e){var t=function(e){function t(t){var r=e.call(this)||this;return r.img=new egret.Bitmap,r.addChild(r.img),r.setTexture(t),r}return __extends(t,e),t.prototype.setTexture=function(e){this.img.texture=e},t.prototype.setScale=function(e){this.img.scaleX=1/e,this.img.scaleY=1/e},t}(egret.DisplayObjectContainer);e.ZImage=t,__reflect(t.prototype,"zmovie.ZImage")}(zmovie||(zmovie={}));var zmovie;!function(e){var t=function(t){function r(e,r,n,i){void 0===n&&(n=null),void 0===i&&(i=1);var o=t.call(this)||this;return o.isPlay=!1,o.endHander=null,o.setMovieObject(e,r,n,i),o.addEventListener(egret.Event.REMOVED_FROM_STAGE,o.onDestory,o),o}return __extends(r,t),r.getFrameMovieObject=function(e,t){return null==e.f_arr&&(e.f_arr=[]),e.f_arr.unshift(e),e},r.prototype.onDestory=function(){this.removeEventListener(egret.Event.REMOVED_FROM_STAGE,this.onDestory,this),this.disposeLayerImg()},r.prototype.getTotalFrame=function(){return this.totalFrame},r.prototype.getCurrPlayLabel=function(){return this.currPlaylabel},r.prototype.getCurrFrame=function(){return this.currFrame},r.prototype.getIsPlay=function(){return this.isPlay},r.prototype.setTimeScale=function(e){0>=e&&(e=.01),this._timeScale=e,null!=this.mcObj&&(this.frameTime=this.mcObj.frameTime/e);for(var t=this.numChildren-1;t>=0;t--){var n=null;this.getChildAt(t)instanceof r&&(n=this.getChildAt(t)),null!=n&&n.setTimeScale(e)}},r.prototype.getTimeScale=function(){return this._timeScale},r.prototype.getLabels=function(){return this.mcObj.frameLabels},r.prototype.getIsExistLabel=function(e){return null!=this.mcObj.frameLabels&&null!=this.mcObj.frameLabels[e]?!0:!1},r.prototype.getCurrLabelObj=function(){var e=this.getLabels();if(null!=e)for(var t in e)if(this.currFrame>=e[t].begin){if(null!=e[t].end&&this.currFrame>=e[t].end)continue;return e[t]}return null},r.prototype.gotoAndPlayLabel=function(e,t){void 0===t&&(t=!1);var n;return null!=this.mcObj.frameLabels&&(n=this.mcObj.frameLabels[e],null!=n?(this.currPlaylabel=e,this.beginFrame=n.begin,null==n.end||t?this.endFrame=-1:this.endFrame=n.end-1,this.gotoAndPlay(this.beginFrame)):(this.beginFrame=0,this.endFrame=-1,this.currPlaylabel=null,this.gotoAndPlay(this.beginFrame)),this.dispatchEventWith(r.EVENT_GOTOANDPLAYLABEL,!1,e)),n},r.prototype.disposeLayerImg=function(){if(null!=this.layerArr)for(var e=this.layerArr.length-1;e>=0;e--){var t=this.layerArr[e].img;null!=t&&null!=t.parent&&t.parent.removeChild(t);var r=this.layerArr[e].mc;null!=r&&null!=r.parent&&r.parent.removeChild(r);var n=this.layerArr[e].li;null!=n&&null!=n.parent&&n.parent.removeChild(n)}},r.prototype.setMovieObject=function(e,t,n,i){void 0===i&&(i=1),null==n&&(n="root"),this.imgArr=e,this.libObj=t,this._mcName=n,this.mcObj=t.mcObjs[n],this.areaObj=this.mcObj.areaObject,this.libScale=1,this._direction=1,this.fmObj=this.mcObj.frameMoveObj,this.currFrame=-1,this.totalFrame=this.mcObj.totalFrame,this.frameTime=this.mcObj.frameTime,this.beginFrame=0,this.endFrame=-1,this._timeScale=1,this.isLoop=!0,this.disposeLayerImg(),this.parentCFOObj={},this.layerArr=new Array,this.currArea=null;for(var o=this.mcObj.layers,a=o.length,s=0;a>s;s++){for(var c=new Array,h=o[s],l=h.length,u=null,p=void 0,g=0;l>g;g++){var f=h[g],d=null;if(null==f.matrix){var m=f.frameNum;for(null==f.libName&&null!=u&&null!=f.x&&(f.libName=u.libName),null==f.a&&(f.a=1),null==f.b&&(f.b=0),null==f.c&&(f.c=0),null==f.d&&(f.d=1),null==f.al&&(f.al=1),null==f.cx?f.cx=0:f.cx*=-1,null==f.cy?f.cy=0:f.cy*=-1,null==f.r&&(f.r=0),null==f.sx&&(f.sx=1),null==f.sy&&(f.sy=1),(null!=f.scaleX||null!=f.scaleY||null!=f.scaleZ||null!=f.rotationX||null!=f.rotationY||null!=f.rotationZ)&&(d={},d.scaleX=f.scaleX,d.scaleY=f.scaleY,d.scaleZ=f.scaleZ,d.x=f.x,d.y=f.y,d.cx=f.cx,d.cy=f.cy,f.cx=0,f.cy=0,f.x=0,f.y=0,d.rotationX=f.rotationX,d.rotationY=f.rotationY,d.rotationZ=f.rotationZ,null==d.scaleX&&(d.scaleX=1),null==d.scaleY&&(d.scaleY=1),null==d.scaleZ&&(d.scaleZ=1),null==d.rotationX&&(d.rotationX=0),null==d.rotationY&&(d.rotationY=0),null==d.rotationZ&&(d.rotationZ=0)),f.matrix=new egret.Matrix(f.a,f.b,f.c,f.d,f.x,f.y),p=0;m>p;p++)r.getFrameMovieObject(f,p+1);for(var _ in f)"id"!=_&&"maskID"!=_&&"op"!=_&&"mcName"!=_&&"matrix"!=_&&"al"!=_&&"libName"!=_&&"f_arr"!=_&&"cx"!=_&&"cy"!=_&&"r"!=_&&"sx"!=_&&"sy"!=_&&delete f[_];null!=d&&(f.obj3d=d)}c.push(f);var y=f.f_arr;if(null!=y)for(p=y.length-1;p>=0;p--)c.push(y[p]);u=f}this.layerArr.push({frames:c})}this.parentPlayTime=0,this.scale=i,this.advanceTime()},r.prototype.nextFrame=function(){this.stop(),this.parentPlayTime=0,this.isPlay=!0,this.advanceTime(),this.isPlay=!1},r.prototype.prevFrame=function(){this.stop(),this.currFrame-=2,-1>this.currFrame&&(this.currFrame=this.totalFrame-2),-1>this.currFrame&&(this.currFrame=-1),this.parentPlayTime=0,this.isPlay=!0,this.advanceTime(),this.isPlay=!1},r.prototype.stop=function(){if(this.isPlay){this.isPlay=!1,this.removeEventListener(egret.Event.ENTER_FRAME,this.advanceTime,this);for(var e=this.numChildren-1;e>=0;e--)if(this.getChildAt(e)instanceof r){var t=this.getChildAt(e);t.stop()}}},r.prototype.play=function(){if(!this.isPlay){this.isPlay=!0,this.addEventListener(egret.Event.ENTER_FRAME,this.advanceTime,this);for(var e=this.numChildren-1;e>=0;e--)if(this.getChildAt(e)instanceof r){var t=this.getChildAt(e);this.mcObj.frameTime!=t.mcObj.frameTime&&t.play()}}},r.prototype.gotoAndStop=function(e){this.stop(),this.currFrame=e-1,this.parentPlayTime=0,this.isPlay=!0,this.advanceTime(),this.isPlay=!1},r.prototype.gotoAndPlay=function(e){this.currFrame=e-1,this.parentPlayTime=0,this.advanceTime(),this.play()},r.prototype.advanceTime=function(){var t=(new Date).getTime();if(this.frameTime<t-this.parentPlayTime){if(this.parentPlayTime=t,this.currFrame++,this.currFrame>=this.totalFrame||-1!=this.endFrame&&this.currFrame>this.endFrame){if(!this.isLoop)return this.currFrame-=1,this.stop(),void this.frameComplete();if(this.frameComplete(),!this.isPlay)return;this.currFrame=this.beginFrame}for(var n=void 0,i=this.layerArr.length,o=0;i>o;o++)try{var a=this.layerArr[o],s=a.frames,c=void 0,h=null,l=null,u=null;a.img instanceof e.ZImage&&(h=a.img),a.mc instanceof r&&(l=a.mc),a.li instanceof e.LargeImage&&(u=a.li);try{if(c=s[this.currFrame],this.parentCFOObj[o]==c||null==c){null!=l&&null!=l.parent&&this.mcObj.frameTime==l.mcObj.frameTime&&l.nextFrame();continue}this.parentCFOObj[o]=c}catch(p){null!=h&&this==h.parent&&this.removeChild(h),null!=l&&null!=l.parent&&(l.stop(),l.parent.removeChild(l)),null!=u&&this==u.parent&&this.removeChild(u);continue}if(null==c.libName)null!=h&&this==h.parent&&this.removeChild(h),null!=l&&null!=l.parent&&(l.stop(),l.parent.removeChild(l)),null!=u&&this==u.parent&&this.removeChild(u);else{var g=e.Util.getTextureByName(this.imgArr,c.libName);if(null==g){var f=void 0;null==this.libObj.mcObjs[c.libName]?(null==u?(u=new e.LargeImage(this.imgArr,this.libObj,c.libName),u.touchEnabled=!1,a.li=u,u.imgDepth=o):u.setObject(this.imgArr,this.libObj,c.libName),f=u,u.matrix=c.matrix,null==u.parent&&this.addChildToDepth(u),null!=l&&this==l.parent&&(this.removeChild(l),l.visible=!1)):(null==l?(l=new r(this.imgArr,this.libObj,c.libName),l.touchEnabled=!1,a.mc=l,l.imgDepth=o):c.libName!=l._mcName&&l.setMovieObject(this.imgArr,this.libObj,c.libName),f=l,null==l.parent?(this.isPlay?this.mcObj.frameTime==l.mcObj.frameTime?l.gotoAndStop(0):l.gotoAndPlay(0):l.gotoAndStop(0),l.setTimeScale(this._timeScale),this.addChildToDepth(l)):this.mcObj.frameTime==l.mcObj.frameTime&&l.nextFrame(),this==l.parent&&(l.matrix=c.matrix),null!=u&&this==u.parent&&this.removeChild(u)),f.anchorOffsetX=c.cx,f.anchorOffsetY=c.cy,f.alpha=c.al,null!=h&&this==h.parent&&this.removeChild(h)}else null==h?(h=new e.ZImage(g),h.imgDepth=o,h.touchEnabled=!1,a.img=h):h.setTexture(g),null!=this.libObj.imgScale&&null!=this.libObj.imgScale[c.libName]?h.setScale(this.libObj.scale*this.libObj.imgScale[c.libName]):h.setScale(this.libObj.scale),h.displayLibName=c.libName,h.matrix=c.matrix,h.anchorOffsetX=c.cx,h.anchorOffsetY=c.cy,h.alpha=c.al,null==h.parent&&this.addChildToDepth(h),null!=l&&null!=l.parent&&(l.stop(),l.parent.removeChild(l)),null!=u&&this==u.parent&&this.removeChild(u)}var d=null;if(null!=h&&null!=h.parent?d=h:null!=l&&null!=l.parent?d=l:null!=u&&null!=u.parent&&(d=u),null!=d){if(null!=c.maskID){if(null!=n&&null!=n[c.maskID]&&null==d.parent.mask){var m=n[c.maskID],_=new egret.Rectangle(m.x,m.y,m.width,m.height);d.parent.mask=_}}else null!=c.id&&(null==n&&(n={}),n[c.id]=d,d.visible=!1);null!=c.mcName&&(d.name=c.mcName,this.dispatchEventWith(r.EVENT_MC_NAME,!1,d))}}catch(p){}if(null!=this.fmObj){var y=this.fmObj[this.currFrame];null!=y&&(null==y[this._scale]&&(y[this._scale]={},y[this._scale].x=y.x*this._scale,y[this._scale].y=y.y*this._scale,y[this._scale].moveType=y.moveType),this.dispatchEventWith(r.EVENT_MOVE,!1,y[this._scale]))}this.framePlay()}},r.prototype.frameComplete=function(){this.dispatchEventWith(r.EVENT_FRAME_COMPLETE,!1)},r.prototype.framePlay=function(){null!=this.areaObj&&(this.currArea=this.areaObj[this.currFrame],null!=this.currArea&&this.dispatchEventWith(r.EVENT_AREA,!1,this.currArea)),this.dispatchEventWith(r.EVENT_ENTER_FRAME)},r.prototype.addChildToDepth=function(e){var t=this.numChildren-1;if(0==t)return void this.addChild(e);for(var r=t;r>=0;r--)try{var n=this.getChildAt(r);if(null!=n&&n.imgDepth<e.imgDepth)return void(t==r?this.addChild(e):this.addChildAt(e,r+1))}catch(i){}this.addChildAt(e,0)},r.EVENT_FRAME_COMPLETE="frameComplete",r.EVENT_MOVE="move",r.EVENT_ENTER_FRAME="enterFrame",r.EVENT_MC_NAME="mcName",r.EVENT_AREA="area",r.EVENT_GOTOANDPLAYLABEL="gotoAndPlayLabel",r}(egret.DisplayObjectContainer);e.ZMovieClip=t,__reflect(t.prototype,"zmovie.ZMovieClip")}(zmovie||(zmovie={}));