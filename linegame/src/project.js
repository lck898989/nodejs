window.__require=function t(e,o,r){function n(a,c){if(!o[a]){if(!e[a]){var s=a.split("/");if(s=s[s.length-1],!e[s]){var l="function"==typeof __require&&__require;if(!c&&l)return l(s,!0);if(i)return i(s,!0);throw new Error("Cannot find module '"+a+"'")}}var h=o[a]={exports:{}};e[a][0].call(h.exports,function(t){return n(e[a][1][t]||t)},h,h.exports,t,e,o,r)}return o[a].exports}for(var i="function"==typeof __require&&__require,a=0;a<r.length;a++)n(r[a]);return n}({Ball:[function(t,e,o){"use strict";cc._RF.push(e,"f456apgH5tDNZryKWxISVJu","Ball");var r=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function r(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(r.prototype=o.prototype,new r)}}(),n=this&&this.__decorate||function(t,e,o,r){var n,i=arguments.length,a=i<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,o):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,r);else for(var c=t.length-1;c>=0;c--)(n=t[c])&&(a=(i<3?n(a):i>3?n(e,o,a):n(e,o))||a);return i>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var i=cc._decorator,a=i.ccclass,c=(i.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.row=-1,e.col=-1,e.id=-1,e.brotherRow=-1,e.brotherCol=-1,e}return r(e,t),e.prototype.start=function(){},e=n([a],e)}(cc.Component));o.default=c,cc._RF.pop()},{}],Game:[function(t,e,o){"use strict";cc._RF.push(e,"de22cJs7SVMUa96BPzASW1D","Game");var r=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function r(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(r.prototype=o.prototype,new r)}}(),n=this&&this.__decorate||function(t,e,o,r){var n,i=arguments.length,a=i<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,o):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,r);else for(var c=t.length-1;c>=0;c--)(n=t[c])&&(a=(i<3?n(a):i>3?n(e,o,a):n(e,o))||a);return i>3&&a&&Object.defineProperty(e,o,a),a},i=this&&this.__awaiter||function(t,e,o,r){return new(o||(o=Promise))(function(n,i){function a(t){try{s(r.next(t))}catch(t){i(t)}}function c(t){try{s(r.throw(t))}catch(t){i(t)}}function s(t){t.done?n(t.value):new o(function(e){e(t.value)}).then(a,c)}s((r=r.apply(t,e||[])).next())})},a=this&&this.__generator||function(t,e){var o,r,n,i,a={label:0,sent:function(){if(1&n[0])throw n[1];return n[1]},trys:[],ops:[]};return i={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function c(t){return function(e){return s([t,e])}}function s(i){if(o)throw new TypeError("Generator is already executing.");for(;a;)try{if(o=1,r&&(n=2&i[0]?r.return:i[0]?r.throw||((n=r.return)&&n.call(r),0):r.next)&&!(n=n.call(r,i[1])).done)return n;switch(r=0,n&&(i=[2&i[0],n.value]),i[0]){case 0:case 1:n=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(n=(n=a.trys).length>0&&n[n.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!n||i[1]>n[0]&&i[1]<n[3])){a.label=i[1];break}if(6===i[0]&&a.label<n[1]){a.label=n[1],n=i;break}if(n&&a.label<n[2]){a.label=n[2],a.ops.push(i);break}n[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(t){i=[6,t],r=0}finally{o=n=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}};Object.defineProperty(o,"__esModule",{value:!0});var c=cc._decorator,s=c.ccclass,l=c.property,h=t("./utils/Util"),p=t("./common/Global"),u=t("./manager/LayerManager"),f=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.gridCon=null,e.gridModel=null,e.circleMode=null,e.lineAudio=null,e.gift=null,e.initedPreNode=null,e.startVec=null,e.endVec=null,e.canMove=!0,e.lastTouchVec=null,e.moveStartColor=null,e.isPair=!1,e.levelData=null,e.currentId=-1,e.lastId=-1,e.isContinue=!1,e.isReStart=!1,e.curDir=-1,e.curMoveId=-1,e.curMoveColor=null,e.gtxArr=null,e.colorCircleArr=null,e.res={},e}return r(e,t),e.prototype.onLoad=function(){console.log("movePath is ",this.movePath),console.log("===>> gtxArr is ",this.gtxArr)},e.prototype.start=function(){return i(this,void 0,void 0,function(){var t;return a(this,function(e){switch(e.label){case 0:return this.gridArr=[],this.ballArr=[],this.map=[],this.gridMap=[],this.aArr=[],this.ballMap=[],this.movePath={},this.gtxArr=[],this.gridCon.on("touchstart",this.touchBegin,this),this.gridCon.on("touchmove",this.touchMove,this),this.gridCon.on("touchend",this.touchEnd,this),t=this,[4,new Promise(function(t,e){cc.loader.loadRes("config/oneLevel.json",cc.JsonAsset,function(e,o){e||o&&(console.log("res is ",o),t(o))})})];case 1:return t.levelData=e.sent(),p.default.level||(p.default.level=1),this.initGrid(),this.addGrphicsToNode(),this.initCircle(),this.gift.active=!1,[2]}})})},e.prototype.addGrphicsToNode=function(){if(this.levelData&&this.levelData.json&&this.levelData.json[p.default.level])for(var t=0;t<this.levelData.json[p.default.level].length;t++){var e=new cc.Node;e.name="pen"+t.toString(),e.addComponent(cc.Graphics),this.gridCon.addChild(e),this.gtxArr.push(e.getComponent(cc.Graphics)),this.gtxArr[t].lineWidth=40,this.gtxArr[t].lineCap=cc.Graphics.LineCap.ROUND,this.gtxArr[t].lineJoin=cc.Graphics.LineJoin.ROUND}},e.prototype.initGrid=function(){for(var t=0;t<6;t++){this.aArr[t]=[],this.map[t]=[],this.gridMap[t]=[],this.ballMap[t]=[];for(var e=0;e<6;e++){var o=cc.instantiate(this.gridModel),r=-this.gridCon.width/2+o.width/2+e*o.width,n=this.gridCon.height/2-o.height/2-t*o.height;o.getComponent("Grid").row=t,o.getComponent("Grid").col=e,o.getComponent("Grid").changeColor=!1,o.setPosition(cc.v2(r,n)),this.gridCon.addChild(o),this.gridArr.push(o),this.aArr[t][e]=new cc.Vec2(r,n),this.map[t][e]=0,this.gridMap[t][e]=o,this.ballMap[t][e]=null}}},e.prototype.initCircle=function(){var t=0===p.default.level?1:p.default.level,e=this.levelData.json[t];if(e){for(var o=0;o<e.length;o++)this.movePath[o]=[];for(var r=0;r<e.length;r++){var n=e[r],i=n.row,a=n.col,c=n.color,s=n.right,l=n.id,h=n.path,u=cc.instantiate(p.default.prefabBuffer[r]);this.addBallToGridCon(u,i,a,l,h,c,s.row,s.col);var f=cc.instantiate(p.default.prefabBuffer[r]);this.addBallToGridCon(f,s.row,s.col,l,h.reverse(),c,i,a)}}else console.log("\u8fd9\u4e00\u5173\u7684\u6570\u636e\u8fd8\u6ca1\u6709\u656c\u8bf7\u671f\u5f85")},e.prototype.addBallToGridCon=function(t,e,o,r,n,i,a,c){var s=t.getComponent("Ball");s.row=e,s.col=o,s.id=r,s.path=n,s.brotherRow=a,s.brotherCol=c,this.gridMap[e][o].getComponent("Grid").ballId=r,t.color=new cc.Color(i[0],i[1],i[2],i[3]),t.setPosition(this.aArr[e][o]),this.map[e][o]=1,this.gridCon.addChild(t),this.ballArr.push(t),this.ballMap[e][o]=t},e.prototype.createRandom=function(t,e){return Math.floor(Math.random()*(e-t)+t)},e.prototype.btnEvent=function(t,e){switch(console.log("data is ",e),e){case"back":this.clearPath(),cc.director.loadScene("Index");break;case"reset":this.resetData()}},e.prototype.resetData=function(){for(var t=0;t<this.gridArr.length;t++){var e=this.gridArr[t];e.getComponent("Grid").changeColor&&(e.getChildByName("grid").color=new cc.Color(255,255,255,255),e.getComponent("Grid").changeColor=!1)}for(t=0;t<this.levelData.json[p.default.level].length;t++)this.movePath[t]=[];for(t=0;t<this.gtxArr.length;t++){this.gtxArr[t].clear()}this.res={}},e.prototype.touchMove=function(t){var e=this.getRowColByTouch(t),o=e.node;if(o){var r=o.getComponent("Grid"),n=this.movePath[this.currentId];if(-1!==this.currentId&&n){var i=n[n.length-1];if(1===Math.abs(i.x-e.p.x)&&1===Math.abs(i.y-e.p.y))this.canMove=!1;else if(Math.abs(i.x-e.p.x)>1&&1===Math.abs(i.y-e.p.y))this.canMove=!1;else if(Math.abs(i.y-e.p.y)>1&&1===Math.abs(i.x-e.p.x))this.canMove=!1;else e.p.x,i.x,e.p.y,i.y,e.p.x,e.p.y}this.canMove&&-1!==e.p.x&&-1!==e.p.y&&n&&(this.map[e.p.x][e.p.y]&&this.ballMap[e.p.x][e.p.y]?(this.ballMap[this.startVec.x][this.startVec.y]&&this.ballMap[e.p.x][e.p.y].getComponent("Ball").id===this.ballMap[this.startVec.x][this.startVec.y].getComponent("Ball").id?(r.changeColor=!0,r.pathId=this.currentId,this.isPair=!0,o.getChildByName("grid").color=new cc.Color(this.moveStartColor.getR(),this.moveStartColor.getG(),this.moveStartColor.getB(),this.moveStartColor.getA()),e.p.x===this.startVec.x&&e.p.y===this.startVec.y||cc.audioEngine.play(this.lineAudio,!1,1)):this.isContinue&&this.curMoveId===this.ballMap[e.p.x][e.p.y].getComponent("Ball").id&&(r.changeColor=!0,r.pathId=this.curMoveId,this.isPair=!0,o.getChildByName("grid").color=new cc.Color(this.moveStartColor.getR(),this.moveStartColor.getG(),this.moveStartColor.getB(),this.moveStartColor.getA()),cc.audioEngine.play(this.lineAudio,!1,1)),e.p.x===this.startVec.x&&e.p.y===this.startVec.y||!this.map[e.p.x][e.p.y]||(this.canMove=!1),h.default.isContainVec2(e.p,n)||r.ballId!==this.currentId||n.push(e.p),this.checkBackAndDeal(n,e)):r.changeColor||this.isContinue?!r.changeColor&&this.isContinue?(-1!==this.curMoveId&&(r.changeColor=!0,r.setColor(this.curMoveColor),r.pathId=this.curMoveId),this.canMove&&!h.default.isContainVec2(e.p,this.movePath[this.curMoveId])&&this.movePath[this.curMoveId].push(e.p)):this.checkBackAndDeal(n,e):(r.changeColor=!0,r.pathId=this.currentId,o.getChildByName("grid").color=new cc.Color(this.moveStartColor.getR(),this.moveStartColor.getG(),this.moveStartColor.getB(),this.moveStartColor.getA()),this.canMove&&!h.default.isContainVec2(e.p,n)&&n.push(e.p)))}},e.prototype.checkBackAndDeal=function(t,e){for(var o=t.length,r=-1,n=0;n<o;n++)e.p.x===t[n].x&&e.p.y===t[n].y&&(r=n);if(-1!==r&&r===o-2){var i=t[o-1],a=this.gridMap[i.x][i.y].getComponent("Grid");a.changeColor=!1,a.pathId=-1,this.gridMap[i.x][i.y].getChildByName("grid").color=new cc.Color(255,255,255,255),t.splice(o-1,1)}},e.prototype.touchBegin=function(t){var e=this.getRowColByTouch(t),o=e.node;if(o){var r=this.ballMap[e.p.x][e.p.y];if(this.canMove=!0,r&&r.getComponent("Ball")&&(this.currentId=r.getComponent("Ball").id),this.map[e.p.x][e.p.y]){for(var n=r.getComponent("Ball").id,i=this.movePath[n].length,a=0;a<i;a++){var c=this.movePath[n][a],s=this.gridMap[c.x][c.y];s.getComponent("Grid").changeColor=!1,s.getChildByName("grid").color=new cc.Color(255,255,255,255)}this.movePath[n]=[],this.isReStart=!0}else if(!this.map[e.p.x][e.p.y]&&this.gridMap[e.p.x][e.p.y].getComponent("Grid").changeColor){this.canMove=!0,this.isContinue=!0,-1!==this.gridMap[e.p.x][e.p.y].getComponent("Grid").pathId&&(this.currentId=this.gridMap[e.p.x][e.p.y].getComponent("Grid").pathId);var l=o.getComponent("Grid").pathId;this.curMoveId=l,this.curMoveColor=o.getComponent("Grid").getColor()}else r||(this.canMove=!1);if(this.startVec=e.p,this.ballMap[e.p.x][e.p.y]&&!h.default.isContainVec2(this.startVec,this.movePath[this.currentId])&&(h.default.isContainVec2(this.startVec,this.movePath[this.currentId])||this.movePath[this.currentId].push(this.startVec)),-1!==e.p.x&&-1!==e.p.y&&null!=o&&this.canMove){var p=void 0;for(a=0;a<this.ballArr.length;a++)if(e.p.x===this.ballArr[a].getComponent("Ball").row&&e.p.y===this.ballArr[a].getComponent("Ball").col&&this.map[e.p.x][e.p.y]){var u=this.ballArr[a];(p=this.gridMap[e.p.x][e.p.y]).getComponent("Grid").changeColor=!0,p.getComponent("Grid").pathId=this.currentId,(f=p.getChildByName("grid")).color=new cc.Color(u.color.getR()/4,u.color.getG()/4,u.color.getB()/4,20),this.moveStartColor=f.color}if(this.isContinue){(p=this.gridMap[e.p.x][e.p.y]).getComponent("Grid").changeColor=!0,p.getComponent("Grid").pathId=this.currentId;var f=p.getChildByName("grid");this.moveStartColor=f.color}}return this.lastId=this.currentId,!0}},e.prototype.touchEnd=function(t){console.log("touchend");var e=this.getRowColByTouch(t);if(this.endVec=e.p,e.node){var o=this.ballMap[e.p.x][e.p.y];o&&o.getComponent("Ball")&&o.getComponent("Ball").id,console.log("before end path is ",this.movePath),this.isContinue=!1,this.isReStart=!1,console.log("path is ",this.movePath)}this.checkIsPass()},e.prototype.onDestroy=function(){this.gridCon.off("touchstart",this.touchBegin,this),this.gridCon.off("touchmove",this.touchMove,this),this.gridCon.off("touchend",this.touchEnd,this),this.movePath={}},e.prototype.getRowColByTouch=function(t){for(var e=new cc.Vec2(-1,-1),o={p:null,node:null},r=(t.target,0);r<this.gridArr.length;r++){var n=this.gridArr[r];n.getBoundingBoxToWorld().contains(t.getLocation())&&(e.x=n.getComponent("Grid").row,e.y=n.getComponent("Grid").col,o.node=n)}return o.p=e,o},e.prototype.update=function(t){this.drawPath()},e.prototype.clearPath=function(){if(this.levelData&&this.levelData.json[p.default.level]){for(var t=this.levelData.json[p.default.level].length,e=(this.currentId,0);e<t;e++)this.gtxArr&&(this.gtxArr[e].clear(!0),cc.isValid(this.gtxArr[e].node)&&this.gtxArr[e].node.destroy());this.gtxArr=[]}},e.prototype.drawPath=function(){if(this.levelData&&this.levelData.json[p.default.level])for(var t=this.levelData.json[p.default.level].length,e=(this.currentId,0);e<t;e++)if(this.movePath[e].length>=2){this.levelData.json[p.default.level].length;var o,r=this.levelData.json[p.default.level][e];o=new cc.Color(r.color[0],r.color[1],r.color[2],r.color[3]),this.gtxArr[e].strokeColor=o;var n=this.movePath[e].length;this.gtxArr[e].clear();for(var i=0;i<n;i++){var a=this.aArr[this.movePath[e][i].x][this.movePath[e][i].y];0===i?this.gtxArr[e].moveTo(a.x,a.y):this.gtxArr[e].lineTo(a.x,a.y)}this.gtxArr[e].stroke()}else this.gtxArr[e].clear()},e.prototype.checkIsPass=function(){var t=!1,e=this.levelData.json[p.default.level],o=Object.keys(this.movePath);if(this.levelData&&e&&e.length===o.length)for(var r=e.length,n=0;n<r;n++){var i=e[n],a=this.movePath[n],c=i.path;if(a.length===c.length){this.checkPathArrIsEqual(a,c)&&(this.res[""+n]=!0)}}if(console.log("obj is ",this.res),Object.keys(this.res).length===e.length){t=!0,u.default.getInstance().showMask(!0);u.default.getInstance().showAnimation("success1",3,this,this.successAnimationOver)}return t},e.prototype.successAnimationOver=function(t){console.log("animation play over"),u.default.getInstance().showMask(!1),u.default.getInstance().deleteAnimation("success1"),this.movePath={},p.default.level++,cc.director.loadScene("Game")},e.prototype.checkPathArrIsEqual=function(t,e){for(var o=[],r=0,n=t.length;r<n;r++)o[r]=[],o[r][0]=t[r].x,o[r][1]=t[r].y;console.log("pathItemArr is ",o);var i=0,a=0;for(n=o.length;a<n;a++)(o[a][0]===e[a][0]&&o[a][1]===e[a][1]||o[a][0]===e[n-1-a][0]&&o[a][1]===e[n-1-a][1])&&i++;return i===e.length},e.prototype.checkPathValid=function(t,e){for(var o=!1,r=0,n=0;n<t.length;n++)if(n<=t.length-2){var i=t[n],a=t[n+1];1!==Math.abs(a.x-i.x)&&1!==Math.abs(a.y-i.y)||r++}return r===t.length-1&&(o=!0),o},n([l(cc.Node)],e.prototype,"gridCon",void 0),n([l(cc.Prefab)],e.prototype,"gridModel",void 0),n([l(cc.Prefab)],e.prototype,"circleMode",void 0),n([l(cc.AudioClip)],e.prototype,"lineAudio",void 0),n([l(cc.Node)],e.prototype,"gift",void 0),e=n([s],e)}(cc.Component);o.default=f,cc._RF.pop()},{"./common/Global":"Global","./manager/LayerManager":"LayerManager","./utils/Util":"Util"}],Global:[function(t,e,o){"use strict";cc._RF.push(e,"c0fd5C48VZH5Js+b1GSMW6I","Global");var r=this&&this.__awaiter||function(t,e,o,r){return new(o||(o=Promise))(function(n,i){function a(t){try{s(r.next(t))}catch(t){i(t)}}function c(t){try{s(r.throw(t))}catch(t){i(t)}}function s(t){t.done?n(t.value):new o(function(e){e(t.value)}).then(a,c)}s((r=r.apply(t,e||[])).next())})},n=this&&this.__generator||function(t,e){var o,r,n,i,a={label:0,sent:function(){if(1&n[0])throw n[1];return n[1]},trys:[],ops:[]};return i={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function c(t){return function(e){return s([t,e])}}function s(i){if(o)throw new TypeError("Generator is already executing.");for(;a;)try{if(o=1,r&&(n=2&i[0]?r.return:i[0]?r.throw||((n=r.return)&&n.call(r),0):r.next)&&!(n=n.call(r,i[1])).done)return n;switch(r=0,n&&(i=[2&i[0],n.value]),i[0]){case 0:case 1:n=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(n=(n=a.trys).length>0&&n[n.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!n||i[1]>n[0]&&i[1]<n[3])){a.label=i[1];break}if(6===i[0]&&a.label<n[1]){a.label=n[1],n=i;break}if(n&&a.label<n[2]){a.label=n[2],a.ops.push(i);break}n[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(t){i=[6,t],r=0}finally{o=n=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}};Object.defineProperty(o,"__esModule",{value:!0});var i=function(){function t(){}return t.preLoadPrefabs=function(t){return r(this,void 0,void 0,function(){var e,o,r,i=this;return n(this,function(a){switch(a.label){case 0:e=[],o=function(t){var o;return n(this,function(r){switch(r.label){case 0:return console.log("i is ",t),[4,o=new Promise(function(e,o){cc.loader.loadRes("balls/"+t,function(t,r){t&&o("error"),e(r);r.name;i.prefabBuffer.push(r)})})];case 1:return r.sent(),e.push(o),[2]}})},r=0,a.label=1;case 1:return r<this.totalColorCout?[5,o(r)]:[3,4];case 2:a.sent(),a.label=3;case 3:return r++,[3,1];case 4:return e.length>0&&Promise.all(e).then(function(){t()}),[2]}})})},t.level=1,t.prefabBuffer=[],t.totalColorCout=7,t}();o.default=i,cc._RF.pop()},{}],Grid:[function(t,e,o){"use strict";cc._RF.push(e,"2219exj5fxBs55k9nL4VufY","Grid");var r=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function r(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(r.prototype=o.prototype,new r)}}(),n=this&&this.__decorate||function(t,e,o,r){var n,i=arguments.length,a=i<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,o):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,r);else for(var c=t.length-1;c>=0;c--)(n=t[c])&&(a=(i<3?n(a):i>3?n(e,o,a):n(e,o))||a);return i>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var i=cc._decorator,a=i.ccclass,c=(i.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.row=-1,e.col=-1,e.ctx=null,e.changeColor=!1,e.pathId=-1,e.ballId=-1,e}return r(e,t),e.prototype.onLoad=function(){},e.prototype.setColor=function(t){this.node.getChildByName("grid").color=t},e.prototype.getColor=function(){return this.node.getChildByName("grid").color},e.prototype.start=function(){},e.prototype.onDestroy=function(){},e=n([a],e)}(cc.Component));o.default=c,cc._RF.pop()},{}],Home:[function(t,e,o){"use strict";cc._RF.push(e,"a0e93qow95IyKtPQzM4Y55d","Home");var r=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function r(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(r.prototype=o.prototype,new r)}}(),n=this&&this.__decorate||function(t,e,o,r){var n,i=arguments.length,a=i<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,o):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,r);else for(var c=t.length-1;c>=0;c--)(n=t[c])&&(a=(i<3?n(a):i>3?n(e,o,a):n(e,o))||a);return i>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var i=cc._decorator,a=i.ccclass,c=(i.property,function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r(e,t),e.prototype.start=function(){console.log("layer is ",cc.find("layer")),cc.game.addPersistRootNode(cc.find("layer"))},e.prototype.goIndex=function(){cc.director.loadScene("Index")},e=n([a],e)}(cc.Component));o.default=c,cc._RF.pop()},{}],Index:[function(t,e,o){"use strict";cc._RF.push(e,"ac686aXMb9M7qPbQVX5bwxP","Index");var r=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function r(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(r.prototype=o.prototype,new r)}}(),n=this&&this.__decorate||function(t,e,o,r){var n,i=arguments.length,a=i<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,o):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,r);else for(var c=t.length-1;c>=0;c--)(n=t[c])&&(a=(i<3?n(a):i>3?n(e,o,a):n(e,o))||a);return i>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var i=cc._decorator,a=i.ccclass,c=i.property,s=t("./common/Global"),l=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.page1=null,e.page2=null,e.page3=null,e.levelModel=null,e.treeLight=null,e}return r(e,t),e.prototype.onLoad=function(){},e.prototype.start=function(){console.log("index start"),this.levelArr=[],this.pageArr=[],this.pageArr.push(this.page1),this.pageArr.push(this.page2),this.pageArr.push(this.page3),this.addAllLevel()},e.prototype.addAllLevel=function(){for(var t=0,e=0;e<3;e++)for(var o=0;o<5;o++)for(var r=0;r<6;r++){t++;var n=cc.instantiate(this.levelModel),i=-this.page1.width/2+n.width/2+130*r,a=this.page1.height/2-n.height/2-125*o;this.levelArr.push(n),n.name=e+"_"+o+"_"+r;var c=n.getChildByName("num").getComponent(cc.Label);t<=s.default.level?(c.string=t.toString(),n.getChildByName("lock").active=!1):(c.string="",n.getChildByName("lock").active=!0),n.on("touchstart",this.touchNodeItem,n),n.on("touchend",this.touchNodeItemend,n),n.setPosition(cc.v2(i,a)),this.pageArr[e].addChild(n)}},e.prototype.touchNodeItem=function(){if(this instanceof cc.Node&&!this.getChildByName("lock").active){console.log(this.name);this.color=new cc.Color(125,125,125,100),this.setScale(1.1)}},e.prototype.touchNodeItemend=function(){if(this instanceof cc.Node&&!this.getChildByName("lock").active){this.setScale(1);var t=this.name.split("_"),e=Number(t[0]),o=Number(t[1]),r=Number(t[2]);this.choosedLevel=0!==o?30*e+6*o+r+1:30*e+r+1,console.log("choosedLevel is ",this.choosedLevel),s.default.level=this.choosedLevel;var n=(new Date).getMilliseconds();s.default.prefabBuffer=[],s.default.preLoadPrefabs(function(){var t=(new Date).getMilliseconds();console.log("\u52a0\u8f7d\u9884\u5236\u4f53\u6d88\u8017",t-n,"ms"),cc.director.loadScene("Game")})}},e.prototype.btnEvent=function(t,e){switch(e){case"share":0;break;case"back":cc.director.loadScene("Home")}},e.prototype.update=function(t){this.treeLight.opacity-=50*t,this.treeLight.opacity<=100&&(this.treeLight.opacity=255)},n([c(cc.Node)],e.prototype,"page1",void 0),n([c(cc.Node)],e.prototype,"page2",void 0),n([c(cc.Node)],e.prototype,"page3",void 0),n([c(cc.Prefab)],e.prototype,"levelModel",void 0),n([c(cc.Node)],e.prototype,"treeLight",void 0),e=n([a],e)}(cc.Component);o.default=l,cc._RF.pop()},{"./common/Global":"Global"}],LayerManager:[function(t,e,o){"use strict";cc._RF.push(e,"27103EyX/ZIsLXEGML3GSIh","LayerManager");var r=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function r(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(r.prototype=o.prototype,new r)}}(),n=this&&this.__decorate||function(t,e,o,r){var n,i=arguments.length,a=i<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,o):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,r);else for(var c=t.length-1;c>=0;c--)(n=t[c])&&(a=(i<3?n(a):i>3?n(e,o,a):n(e,o))||a);return i>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var i,a=cc._decorator,c=a.ccclass,s=a.property;(function(t){t[t.GAME=0]="GAME",t[t.MASK=1]="MASK",t[t.TOAST=2]="TOAST",t[t.ANIMATION=3]="ANIMATION",t[t.TEXTURE=4]="TEXTURE",t[t.VIDEO=5]="VIDEO"})(i||(i={}));var l=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.offset=100,e.animationState=null,e.animationCache={},e.maskLayer=null,e.toastLayer=null,e.animationLayer=null,e.texLayer=null,e.videoLayer=null,e.layerNode=null,e}var o;return r(e,t),o=e,e.prototype.onLoad=function(){this.layerNode=cc.find("layer"),cc.find("layer").active=!1},e.getInstance=function(){return this._instance||(this._instance=new o),this._instance},e.prototype.showMask=function(t){if(!this.maskLayer){cc.find("layer").getComponent("LayerManager").node;this.maskLayer=cc.find("layer").getChildByName("mask")}this.maskLayer&&(this.maskLayer.parent.active=!0,t?(this.maskLayer.active=!0,this.maskLayer.zIndex=this.offset+i.MASK):this.maskLayer.active=!1)},e.prototype.showSprite=function(t,e){if(!this.texLayer){var o=cc.find("layer").getComponent("LayerManager").node;this.texLayer=o.getChildByName("tex")}this.texLayer&&(this.texLayer.active=!!e)},e.prototype.showToast=function(t){if(!this.toastLayer){var e=cc.find("layer").getComponent("LayerManager").node;this.toastLayer=e.getChildByName("toast")}this.toastLayer&&(this.toastLayer.parent.active=!0,this.toastLayer.active=!0,this.toastLayer.active=!0,this.toastLayer.addChild(t),this.toastLayer.zIndex=this.offset+i.TOAST)},e.prototype.showAnimation=function(t,e,o,r){var n=this;if(void 0===e&&(e=1),!this.animationLayer){var a=cc.find("layer").getComponent("LayerManager").node;this.animationLayer=a.getChildByName("animation")}if(this.animationLayer){this.animationLayer.parent.active=!0,this.animationLayer.active=!0,this.animationLayer.active=!0,this.animationLayer.zIndex=this.offset+i.ANIMATION;var c=this.animationLayer.getComponent(cc.Animation);this.animationCache[t]?(c.defaultClip=this.animationCache[t],c.playOnLoad=!0,this.animationState=c.play(),r&&c.on("finished",r,o)):cc.loader.loadRes("animation/"+t,cc.AnimationClip,function(e,i){e||(c.defaultClip=i,n.animationCache[t]=i,c.playOnLoad=!0,n.animationState=c.play(),r&&c.on("finished",r,o))})}},e.prototype.deleteAnimation=function(t){""!==t&&(this.animationLayer.getComponent(cc.Animation).stop(),this.animationLayer.getComponent(cc.Animation).defaultClip=null,this.animationLayer.active=!1)},e.prototype.clearAnimationCache=function(){this.animationCache={}},e.prototype.start=function(){},e._instance=null,n([s(cc.Node)],e.prototype,"maskLayer",void 0),n([s(cc.Node)],e.prototype,"toastLayer",void 0),n([s(cc.Node)],e.prototype,"animationLayer",void 0),n([s(cc.Node)],e.prototype,"texLayer",void 0),n([s(cc.Node)],e.prototype,"videoLayer",void 0),e=o=n([c],e)}(cc.Component);o.default=l,cc._RF.pop()},{}],StarShader:[function(t,e,o){"use strict";cc._RF.push(e,"70544qo0a5NI4N4Uy+5Ven1","StarShader");var r=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function r(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(r.prototype=o.prototype,new r)}}(),n=this&&this.__decorate||function(t,e,o,r){var n,i=arguments.length,a=i<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,o):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,r);else for(var c=t.length-1;c>=0;c--)(n=t[c])&&(a=(i<3?n(a):i>3?n(e,o,a):n(e,o))||a);return i>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var i=cc._decorator,a=i.ccclass,c=(i.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._start=0,e}return r(e,t),e.prototype.onLoad=function(){},e.prototype.start=function(){this._material=this.node.getComponent(cc.Sprite).sharedMaterials[0]},e.prototype.update=function(t){this.node.active&&this._material&&this.setShaderTime(t)},e.prototype.setShaderTime=function(t){var e=this._start;e>65535&&(e=0),e+=.01,this._material.effect&&(this._material.effect.setProperty("u_time",e),this._start=e)},e=n([a],e)}(cc.Component));o.default=c,cc._RF.pop()},{}],SuccessMenu:[function(t,e,o){"use strict";cc._RF.push(e,"125d0FRyQJBHYkuiygzhmA5","SuccessMenu");var r=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function r(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(r.prototype=o.prototype,new r)}}(),n=this&&this.__decorate||function(t,e,o,r){var n,i=arguments.length,a=i<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,o):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,r);else for(var c=t.length-1;c>=0;c--)(n=t[c])&&(a=(i<3?n(a):i>3?n(e,o,a):n(e,o))||a);return i>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var i=cc._decorator,a=i.ccclass,c=(i.property,function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r(e,t),e.prototype.onLoad=function(){},e.prototype.start=function(){},e.prototype.clickEvent=function(t,e){e},e.prototype.update=function(t){},e=n([a],e)}(cc.Component));o.default=c,cc._RF.pop()},{}],Util:[function(t,e,o){"use strict";cc._RF.push(e,"5862bfQ3x1PWZ3XzsI8UtfC","Util"),Object.defineProperty(o,"__esModule",{value:!0});var r=function(){function t(){}return t.uniqueArr=function(t){return null},t.isContainVec2=function(t,e){for(var o=0;o<e.length;o++)if(e[o].x===t.x&&e[o].y===t.y)return!0;return!1},t.deepClone=function(e){var o;if(e instanceof Array)o=[];else{if(!(e instanceof Object))return e;o={}}for(var r in e)o[r]=t.deepClone(e[r]);return o},t}();o.default=r,cc._RF.pop()},{}]},{},["Ball","Game","Grid","Home","Index","StarShader","Global","LayerManager","SuccessMenu","Util"]);